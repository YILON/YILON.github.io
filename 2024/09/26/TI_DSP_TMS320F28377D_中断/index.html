<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>TI_DSP_TMS320F28377D_中断 | YILON</title><meta name="author" content="YILON"><meta name="copyright" content="YILON"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="中断  外设中断 C28xCPU有14个外设中断线。其中两个（INT13和INT14）分别直接连接到CPU定时器Timer 1和Timer 2。 其余12个通过ePIE连接到外设中断信号。 C28xCPU默认CPU处理中断时禁用全局中断， 从而使得其他中断处于待处理状态。  因此默认情况下不支持中断嵌套。 可在中断服务程序ISR中开启全局中断，从而实现和中断嵌套。  中断路径分为三阶段：外设，PI">
<meta property="og:type" content="article">
<meta property="og:title" content="TI_DSP_TMS320F28377D_中断">
<meta property="og:url" content="http://example.com/2024/09/26/TI_DSP_TMS320F28377D_%E4%B8%AD%E6%96%AD/index.html">
<meta property="og:site_name" content="YILON">
<meta property="og:description" content="中断  外设中断 C28xCPU有14个外设中断线。其中两个（INT13和INT14）分别直接连接到CPU定时器Timer 1和Timer 2。 其余12个通过ePIE连接到外设中断信号。 C28xCPU默认CPU处理中断时禁用全局中断， 从而使得其他中断处于待处理状态。  因此默认情况下不支持中断嵌套。 可在中断服务程序ISR中开启全局中断，从而实现和中断嵌套。  中断路径分为三阶段：外设，PI">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/private_img/cover.svg">
<meta property="article:published_time" content="2024-09-26T02:38:32.000Z">
<meta property="article:modified_time" content="2024-12-24T00:41:04.164Z">
<meta property="article:author" content="YILON">
<meta property="article:tag" content="嵌入式">
<meta property="article:tag" content="DSP">
<meta property="article:tag" content="TMS320F28377D">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/private_img/cover.svg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2024/09/26/TI_DSP_TMS320F28377D_%E4%B8%AD%E6%96%AD/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'TI_DSP_TMS320F28377D_中断',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-color: #4582A0;"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/private_img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">88</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">93</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">24</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/private_img/cover.svg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">YILON</span></a><a class="nav-page-title" href="/"><span class="site-name">TI_DSP_TMS320F28377D_中断</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">TI_DSP_TMS320F28377D_中断</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-09-26T02:38:32.000Z" title="发表于 2024-09-26 10:38:32">2024-09-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-12-24T00:41:04.164Z" title="更新于 2024-12-24 08:41:04">2024-12-24</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/">嵌入式</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/DSP/">DSP</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1>中断</h1>
<p><img src="./%E4%B8%AD%E6%96%AD%E6%9E%B6%E6%9E%84.png" alt="中断架构"></p>
<h2 id="外设中断">外设中断</h2>
<p>C28xCPU有14个外设中断线。其中两个（INT13和INT14）分别直接连接到CPU定时器Timer 1和Timer 2。<br>
其余12个通过ePIE连接到外设中断信号。</p>
<p>C28xCPU默认CPU处理中断时禁用全局中断，<br>
从而使得其他中断处于待处理状态。</p>
<blockquote>
<p>因此默认情况下不支持中断嵌套。<br>
可在中断服务程序ISR中开启全局中断，从而实现和中断嵌套。</p>
</blockquote>
<p>中断路径分为三阶段：外设，PIE和CPU。每级都有自己的使能和标志寄存器。</p>
<p><img src="./%E5%A4%96%E8%AE%BE%E4%B8%AD%E6%96%AD%E8%B7%AF%E5%BE%84.png" alt="外设中断路径"></p>
<p><img src="./%E5%A4%96%E8%AE%BE%E4%B8%AD%E6%96%AD%E5%93%8D%E5%BA%94%E6%B5%81%E7%A8%8B.png" alt="外设中断响应流程"></p>
<p>外设中断源会在对应外设章节中说明，以下是概览：<br>
<img src="./%E4%B8%AD%E6%96%AD%E6%BA%90.png" alt="中断源"></p>
<blockquote>
<p>上图中每一行中断是PIE一个组，每一列代表一个CPU级中断。<br>
当多个中断待处理时，表中越往上的中断有更高的优先级。</p>
</blockquote>
<br/>
<p>一些外设允许多个事件触发相同的中断信号，此时中断源可通过读取外设的状态寄存器确定。</p>
<p>关于双CPU的中断处理：</p>
<blockquote>
<p>每个CPU都有自己的PIE，两个PIE必须单独配置。</p>
<p>某些中断源可能来着两CPU的共享外设，例如ADC和SPI。<br>
这些中断将发送到两个PIE，而不管外设的所有权。</p>
<p>因此，如果在其他CPU的PIE中启用了该中断，<br>
则由一个CPU拥有的外设可能会在另一个CPU上产生中断。</p>
</blockquote>
<p>关于中断延迟：</p>
<blockquote>
<p>中断延迟是PIEIFRx.y锁存中断和第一条ISR指令进入CPU流水线执行阶段之间的时间。<br>
最小中断延迟为14个SYSCLK周期。<br>
ISR或堆栈存储器上的等待状态将增加延迟。<br>
外部中断至少为GPIO同步增加两个 SYSCLK周期，以及额外的输入验证时间（如果使用）。</p>
</blockquote>
<h2 id="中断相关常用函数">中断相关常用函数</h2>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在hw_ints.h定义了如下中断序号</span></span><br><span class="line"><span class="comment">// 仅展示部分</span></span><br><span class="line"><span class="comment">// Lower PIE Group 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INT_ADCA1                   0x00200101U <span class="comment">// 1.1 - ADCA Interrupt 1</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INT_ADCB1                   0x00210102U <span class="comment">// 1.2 - ADCB Interrupt 1</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INT_ADCC1                   0x00220103U <span class="comment">// 1.3 - ADCC Interrupt 1</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INT_XINT1                   0x00230104U <span class="comment">// 1.4 - XINT1 Interrupt</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INT_XINT2                   0x00240105U <span class="comment">// 1.5 - XINT2 Interrupt</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INT_ADCD1                   0x00250106U <span class="comment">// 1.6 - ADCD Interrupt 1</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INT_TIMER0                  0x00260107U <span class="comment">// 1.7 - Timer 0 Interrupt</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INT_WAKE                    0x00270108U <span class="comment">// 1.8 - Standby and Halt Wakeup Interrupt</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//在interrupt.h中定义了如下封装</span></span><br><span class="line"><span class="comment">// 以下是可以作为Interrupt_enableInCPU() 和 Interrupt_disableInCPU() 函数的入参。</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_CPU_INT1    0x1U      <span class="comment">//!&lt; CPU Interrupt Number 1</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_CPU_INT2    0x2U      <span class="comment">//!&lt; CPU Interrupt Number 2</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_CPU_INT3    0x4U      <span class="comment">//!&lt; CPU Interrupt Number 3</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_CPU_INT4    0x8U      <span class="comment">//!&lt; CPU Interrupt Number 4</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_CPU_INT5    0x10U     <span class="comment">//!&lt; CPU Interrupt Number 5</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_CPU_INT6    0x20U     <span class="comment">//!&lt; CPU Interrupt Number 6</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_CPU_INT7    0x40U     <span class="comment">//!&lt; CPU Interrupt Number 7</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_CPU_INT8    0x80U     <span class="comment">//!&lt; CPU Interrupt Number 8</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_CPU_INT9    0x100U    <span class="comment">//!&lt; CPU Interrupt Number 9</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_CPU_INT10   0x200U    <span class="comment">//!&lt; CPU Interrupt Number 10</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_CPU_INT11   0x400U    <span class="comment">//!&lt; CPU Interrupt Number 11</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_CPU_INT12   0x800U    <span class="comment">//!&lt; CPU Interrupt Number 12</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_CPU_INT13   0x1000U   <span class="comment">//!&lt; CPU Interrupt Number 13</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_CPU_INT14   0x2000U   <span class="comment">//!&lt; CPU Interrupt Number 14</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_CPU_DLOGINT 0x4000U   <span class="comment">//!&lt; CPU Data Log Interrupt</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_CPU_RTOSINT 0x8000U   <span class="comment">//!&lt; CPU RTOS Interrupt</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下是可作为PIE组参数传递给 Interrupt_clearACKGroup() 函数的值。</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_ACK_GROUP1    0x1U    <span class="comment">//!&lt; Acknowledge PIE Interrupt Group 1</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_ACK_GROUP2    0x2U    <span class="comment">//!&lt; Acknowledge PIE Interrupt Group 2</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_ACK_GROUP3    0x4U    <span class="comment">//!&lt; Acknowledge PIE Interrupt Group 3</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_ACK_GROUP4    0x8U    <span class="comment">//!&lt; Acknowledge PIE Interrupt Group 4</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_ACK_GROUP5    0x10U   <span class="comment">//!&lt; Acknowledge PIE Interrupt Group 5</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_ACK_GROUP6    0x20U   <span class="comment">//!&lt; Acknowledge PIE Interrupt Group 6</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_ACK_GROUP7    0x40U   <span class="comment">//!&lt; Acknowledge PIE Interrupt Group 7</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_ACK_GROUP8    0x80U   <span class="comment">//!&lt; Acknowledge PIE Interrupt Group 8</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_ACK_GROUP9    0x100U  <span class="comment">//!&lt; Acknowledge PIE Interrupt Group 9</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_ACK_GROUP10   0x200U  <span class="comment">//!&lt; Acknowledge PIE Interrupt Group 10</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_ACK_GROUP11   0x400U  <span class="comment">//!&lt; Acknowledge PIE Interrupt Group 11</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INTERRUPT_ACK_GROUP12   0x800U  <span class="comment">//!&lt; Acknowledge PIE Interrupt Group 12</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//在Sysconfig自动生成的board.h中对上述内容进行了二次封装</span></span><br><span class="line"><span class="comment">//这个二次封装名可在Sysconfig设置</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INT_myCPUTIMER0 INT_TIMER0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INT_myCPUTIMER0_INTERRUPT_ACK_GROUP INTERRUPT_ACK_GROUP1 </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">////////////////////////////相关常用函数//////////////////////////</span></span><br><span class="line"><span class="comment">//使能全局CPU中断</span></span><br><span class="line">EINT;</span><br><span class="line"></span><br><span class="line"><span class="comment">//不使能全局CPU中断</span></span><br><span class="line">DINT;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使能debug中断</span></span><br><span class="line">ERTM;</span><br><span class="line"></span><br><span class="line"><span class="comment">//不使能debug中断</span></span><br><span class="line">DETM;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使能指定CPU中断</span></span><br><span class="line">Interrupt_enableInCPU(INTERRUPT_CPU_INT1);  <span class="comment">//此入参Sysconfig未作二次封装</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//不使能指定CPU中断</span></span><br><span class="line">Interrupt_disableInCPU(INTERRUPT_CPU_INT1);  <span class="comment">//此入参Sysconfig未作二次封装</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//使能指定中断</span></span><br><span class="line">Interrupt_enable(INT_myCPUTIMER0);</span><br><span class="line"></span><br><span class="line"><span class="comment">//不使能指定中断</span></span><br><span class="line">Interrupt_disable(INT_myCPUTIMER0);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//清除PIE组中断ACK标志，使该PIE组可以重新响应中断</span></span><br><span class="line"><span class="comment">//一般用于对应组的中断服务函数末尾处</span></span><br><span class="line"><span class="comment">//对于CPU级中断（比如Timer2中断），不需要此操作</span></span><br><span class="line"> Interrupt_clearACKGroup(INTERRUPT_ACK_GROUP1);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="中断例程">中断例程</h2>
<p>以下例程是基于Sysconfig配置的。<br>
在配置Sysconfig时，默认各定时器与中断是不使能的。<br>
由程序进行手动使能。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;device.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;board.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//中断服务程序声明</span></span><br><span class="line">__interrupt <span class="type">void</span> <span class="title function_">INT_myCPUTIMER0_ISR</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Initialize device clock and peripherals</span></span><br><span class="line">    Device_init();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Initialize GPIO and configure the GPIO pin as a push-pull output</span></span><br><span class="line">    Device_initGPIO();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Initialize PIE and clear PIE registers. Disables CPU interrupts.</span></span><br><span class="line">    Interrupt_initModule();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Initialize the PIE vector table with pointers to the shell Interrupt</span></span><br><span class="line">    <span class="comment">// Service Routines (ISR).</span></span><br><span class="line">    Interrupt_initVectorTable();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//调用sysconfig生成的外设初始化函数</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    该函数对于中断的初始化非常简单，调用了driverlib的两个函数：</span></span><br><span class="line"><span class="comment">    Interrupt_register(INT_myCPUTIMER0, &amp;INT_myCPUTIMER0_ISR);</span></span><br><span class="line"><span class="comment">    Interrupt_disable(INT_myCPUTIMER0);</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    Board_init();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Enable Global Interrupt (INTM) and realtime interrupt (DBGM)</span></span><br><span class="line">    EINT;</span><br><span class="line">    ERTM;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//////////////////////////定时器设置//////////////////////////////</span></span><br><span class="line">    <span class="comment">//重载定时器0计数值</span></span><br><span class="line">    CPUTimer_reloadTimerCounter(myCPUTIMER0_BASE);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定时器0启动</span></span><br><span class="line">    CPUTimer_startTimer(myCPUTIMER0_BASE);</span><br><span class="line"></span><br><span class="line">    <span class="comment">///////////////////////////看门狗设置//////////////////////////////</span></span><br><span class="line">    <span class="comment">//使能看门狗</span></span><br><span class="line">    SysCtl_enableWatchdog();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Loop Forever</span></span><br><span class="line">    <span class="keyword">for</span> (;;)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//中断服务程序</span></span><br><span class="line">__interrupt <span class="type">void</span> <span class="title function_">INT_myCPUTIMER0_ISR</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//喂狗</span></span><br><span class="line">    SysCtl_serviceWatchdog();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 清除PIE第1组中断ACK标志，使该PIE组可以重新响应中断</span></span><br><span class="line">    Interrupt_clearACKGroup(INTERRUPT_ACK_GROUP1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="异常与不可屏蔽中断（NMI）">异常与不可屏蔽中断（NMI）</h2>
<p>每个CPU都有自己的NMI模块。<br>
当输入NMI信号，将在NMIFLG寄存器中设置状态位，并启动NMI看门狗计数器。<br>
该计数器由SYSCLK提供的时钟，如果达到NMWDPRD寄存器中的值，则触发NMI看门狗复位（NMIWDRS）。<br>
如果自定义了NMI中断处理程序，其必须使能NMIFLGCLR寄存器以清除标志位。<br>
一旦所有标志位清零，NMIFLG寄存器中的NMNT位也可以被清零，以允许接收NMI中断信号。</p>
<p>NMI模块在启动过程中用启动ROM启用。<br>
NMI中断处理程序向量也需要写入中断向量表。</p>
<br>
<p>在线Debug时，NMI看门狗计数器的行为如下：</p>
<blockquote>
<ul>
<li>CPU暂停：当CPU暂停时，NMI看门狗计数器暂停</li>
<li>Run-Free模式: 当CPu处于Run-Free模式时，NMI看门狗计数器将恢复正常运行。</li>
<li>实时单步模式：当CPU处于实时单步模式时，NMI看门狗计数器暂停。即使在实时中断期间，计数器仍保持暂停。</li>
<li>实时Run-Free模式：当CPU处于实时Run-Free模式时，NMI看门狗计数器工作正常。</li>
</ul>
</blockquote>
<h2 id="NMI来源">NMI来源</h2>
<ul>
<li>缺少时钟检测逻辑
<ul>
<li>缺少时钟检测逻辑监视OSCCLK故障。如果OSCCLK源停止，则PLL被旁路，OSCCLK连接到 INTOSC1，并且NMI被触发到两个CPU。</li>
</ul>
</li>
<li>RAM不可纠正的ECC错误
<ul>
<li>RAM读取中的单位奇偶校验错误，双位ECC数据错误或单位ECC地址错误将触发NMI。<br>
这适用于CPU， CLA和DMA读取。单位ECC数据错误不触发NMI，但可以可选地触发正常的外围中断。</li>
</ul>
</li>
<li>flash不可纠正的ECC错误
<ul>
<li>闪存读取中的双位ECC数据错误或单位ECC地址错误将触发NMI。单位ECC数据错误不触发NMI，但可以可选地触发正常的外围中断。</li>
</ul>
</li>
<li>NMI向量提取失配
<ul>
<li>每个CPU都有冗余中断向量表。如果在向量提取期间检测到中断向量表中不匹配，则运行用户指定的错误处理程序。如果向量提取是由NMI引起的，则第二个NMI被触发到另一个CPU。其他中断的不匹配不会触发NMI。</li>
</ul>
</li>
<li>CPU2的看门狗或NMI看门狗复位将触发CPU1的NMI
<ul>
<li>此仅适用于CPU1。</li>
</ul>
</li>
<li>非法指令限制(ITRAP)
<ul>
<li>CPU尝试执行非法指令，则会生成一个ITRAP的特殊中断信号。<br>
该中断也是不可屏蔽的。</li>
</ul>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="YILON">YILON</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2024/09/26/TI_DSP_TMS320F28377D_%E4%B8%AD%E6%96%AD/">http://example.com/2024/09/26/TI_DSP_TMS320F28377D_%E4%B8%AD%E6%96%AD/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://example.com" target="_blank">YILON</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/">嵌入式</a><a class="post-meta__tags" href="/tags/DSP/">DSP</a><a class="post-meta__tags" href="/tags/TMS320F28377D/">TMS320F28377D</a></div><div class="post-share"><div class="social-share" data-image="/private_img/cover.svg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/09/25/TI_DSP_TMS320F28377D_%E5%A4%8D%E4%BD%8D%E6%9C%BA%E5%88%B6/" title="TI_DSP_TMS320F28377D_复位机制"><img class="cover" src="/private_img/cover.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">TI_DSP_TMS320F28377D_复位机制</div></div><div class="info-2"><div class="info-item-1">设备标识 器件识别寄存器提供有关器件类别，器件系列，版本，器件编号，引脚数，工作温度范围，封装类型，引脚数和器件验证状态的信息。 所有器件信息都是 DEV_CFG_REGS空间的一部分，只能由 CPU1子系统上运行的软件访间。 UIDREGS中提供256位唯一ID（UID）。256位分为以下寄存器：  UID_PSRAND0-5：192位伪随机数据 UID_UNIQUE：32位唯一数据，该寄存器中的值在具有相同PARTIDH的所有器件中将是唯一的 UID_CHECKSUM: 前两者 的 32 位 fletcher...</div></div></div></a><a class="pagination-related" href="/2024/09/26/TI_DSP_TMS320F28377D_%E6%97%B6%E9%92%9F%E3%80%81CPU%E5%AE%9A%E6%97%B6%E5%99%A8%E4%B8%8E%E7%9C%8B%E9%97%A8%E7%8B%97/" title="TI_DSP_TMS320F28377D_时钟、CPU定时器与看门狗"><img class="cover" src="/private_img/cover.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">TI_DSP_TMS320F28377D_时钟、CPU定时器与看门狗</div></div><div class="info-2"><div class="info-item-1">时钟 TMS320F28377D的时钟树如下：   如果将 PLLSYSCLK 配置为高于 194 MHz 的频率，则内部振荡器不能用作 PLL 源。  外设与时钟域  主外部振荡时钟源的输入方式 主外部振荡时钟源(XTAL)由片上专用的X1、X2引脚提供输入。 有这么几种连接方式： 外部3.3V外部时钟  外部晶振  外部谐振器  辅助时钟输入 GPIO133（AUXCLKIN）支持附加的外部时钟源。 这必须是单端3.3V外部时钟。 它可以用作USB和CAN时钟的源。  Sysconfig配置时钟 系统时钟： 在基于Driverlib开发的程序中， 系统时钟相关参数定义在device.h中，配置函数则在device.c中， 涉及的寄存器与函数较多，要更改时钟配置较为麻烦。 如果使用Sysconfig工具配置时钟则很简单。 当启用Sysconfig-&gt;SOFTWARE-&gt;Device Support后，将可通过图形化界面的clock tree工具配置系统时钟。 （相关注意事项见前文关于Sysconfig的使用）   配置好clock...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2024/09/19/TI_DSP_C2000_driverlib%E4%B8%8ESysconfig/" title="TI_DSP_C2000_driverlib与Sysconfig"><img class="cover" src="/private_img/cover.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-09-19</div><div class="info-item-2">TI_DSP_C2000_driverlib与Sysconfig</div></div><div class="info-2"><div class="info-item-1">driverlib 简述 driverLib是德州仪器为C2000微控制器提供的一个驱动库，它包含了大量的硬件抽象层（HAL）函数，用于简化微控制器的编程过程。 driverlib 库的代码组织通常遵循模块化设计，每个模块对应一个微控制器外设或功能模块。 每个模块都提供初始化函数、配置函数以及操作函数。开发者只需调用这些函数即可完成外设的配置和操作，避免手动处理低级别的寄存器操作。 由于 driverlib 提供了对硬件寄存器的抽象层，代码在不同的 C2000 器件之间的移植变得更容易。  TI通常将项目架构称为基于bit-filed的或基于driverlib的， 前者即所谓的“操作寄存器”式设计，是C2000Ware/device_support中的例程形式。   driverlib包含在C2000 Ware中，要使用此库，必须安装C2000 Ware。  driverlib的文件结构 默认位置安装C2000...</div></div></div></a><a class="pagination-related" href="/2024/12/13/TI_DSP_TMS320F28377D_IPC/" title="TI_DSP_TMS320F28377D_IPC"><img class="cover" src="/private_img/cover.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-13</div><div class="info-item-2">TI_DSP_TMS320F28377D_IPC</div></div><div class="info-2"><div class="info-item-1">基本架构  功能组成 Message RAMs 有两个 2KByte 的消息RAM， 分别为由CPU1 -&gt; CPU2 和 CPU2 -&gt; CPU1。 具体控制情况如下：   对Message RAM进行读写不会触发远程CPU的任何事件。  IPC 标志和中断 每个通信方向有 32 个IPC事件信号。  CPUx 可以通过写入 IPCSET 寄存器 32 位中的任意一位来引发 IPC 事件。 这将设置 CPUx IPCFLG 寄存器和 CPUy IPCSTS 寄存器中的相应位。  CPUy 可以通过设置 IPCACK 寄存器中的相应位来发出响应事件的信号。 这将清除 CPUx IPCFLG 寄存器和 CPUy IPCSTS 寄存器中的相应位。  如果 CPUx 需要取消事件，可设置 IPCCLR 寄存器中的相应位。 这与 CPUy 写入 IPCACK 的效果相同。  标志 0-3（使用 IPCSET[3:0]设置）向远程 CPU 发射中断。 远程 CPU 必须正确配置 ePIE 模块才能接收 IPC 中断。 标志 4-31（使用 IPCSET[31:4]...</div></div></div></a><a class="pagination-related" href="/2024/10/21/TI_DSP_TMS320F28377D_DMA/" title="TI_DSP_TMS320F28377D_DMA"><img class="cover" src="/private_img/cover.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-21</div><div class="info-item-2">TI_DSP_TMS320F28377D_DMA</div></div><div class="info-2"><div class="info-item-1">概述  六个具有独立 PIE 中断的通道 每个 DMA 通道可由多个外设触发源独立触发 数据源和目标：  GSx RAM CPU 消息RAM (IPC RAM) ADC存储器总线映射结果寄存器 ePWMx SPI, McBSP, EMIF   字长:16-bit或 32-bit(SPI和 McBSP 限制为 16-bit) 吞吐量：4 cycles/word 无仲裁    DMA总线由32位地址总线、32位数据读总线、32位数据写总线组成。   明确一点，挂载在DMA总线上的内部存储空间只有GS RAM和MSG RAM， 因此DMA可以访问的内部空间指针（地址）必须分配在这两类空间中。 一般地，如果使用数组作为源或目标地址， 可使用如下方式将该数组分配在GS RAM或MSG RAM中：   首先在CMD文件中定义相应的段； 注意，CPU2要使用GS RAM或MSG RAM，必须先在CPU1中进行分配。 具体分配方式见文末例程。  1234567// 在数组定义之前声明// 假设定义的段的名字是“ramgs0”，代表其占用RAM GS0的空间。 #pragma...</div></div></div></a><a class="pagination-related" href="/2024/12/16/TI_DSP_TMS320F28377D_EMIF/" title="TI_DSP_TMS320F28377D_EMIF"><img class="cover" src="/private_img/cover.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-16</div><div class="info-item-2">TI_DSP_TMS320F28377D_EMIF</div></div><div class="info-2"><div class="info-item-1">相关概念   SRAM(Static Random-Access Memory)：这种存储器只要保持通电，里面储存的数据就可以恒常保持。 DRAM(Dynamic Random-Access Memory)：里面所储存的数据就需要周期性地刷新充电。功耗较SRAM要小；集成度比SRAM要高，因此价格更便宜。   SDRAM（Synchronous Dynamic Random Access Memory）是一种同步动态随机存取存储器。 SDRAM的“同步”指的是它的操作是与系统时钟同步的， 这意味着数据传输的时序受到系统时钟信号的控制，使得数据访问和处理更为高效。 主要特点：  同步时序：SDRAM的所有操作都与外部时钟信号同步，保证数据传输的准确性和一致性。 动态存储：和传统的静态RAM（SRAM）相比，SDRAM是动态的，需要定期刷新才能保持数据。否则，存储的数据会丢失。 高性能：SDRAM通过使用流水线技术（pipelining）来提高数据处理速度，通常具有更高的带宽和更低的延迟。 三级寻址：先选择Bank，再选择行地址，最后再选择列地址。   第一代SDRAM(SDR...</div></div></div></a><a class="pagination-related" href="/2024/11/21/TI_DSP_TMS320F28377D_GPIO%E3%80%81SCI%E3%80%81I2C%E4%B8%8ESPI/" title="TI_DSP_TMS320F28377D_GPIO、SCI、I2C与SPI"><img class="cover" src="/private_img/cover.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-21</div><div class="info-item-2">TI_DSP_TMS320F28377D_GPIO、SCI、I2C与SPI</div></div><div class="info-2"><div class="info-item-1">GPIO 除了 CPU 控制的 I/O 功能外，单个 GPIO 引脚可复用多达12个独立的外设信号。 每个引脚输出既可由外设控制，也可由四个master控制：  CPU1 CPU1.CLA CPU2 CPU2.CLA  最高有8个 IO 端口: • Port A ： GPIO0-GPIO31 • Port B ： GPIO32-GPIO63 • Port C ： GPIO64-GPIO95 • Port D ： GPIO96-GPIO127 • Port E ： GPIO128-GPIO159 • Port F ： GPIO160-GPIO191 • Port G ： GPIO192-GPIO223 • Port H ： GPIO224-GPIO255  首先，输入和输出路径完全分开，只在引脚处连接。其次，外设复用远离引脚。 因此，CPU 和 CLA 都可以读取引脚的物理状态，而不受master设置和外设复用的影响。 同样的，外部中断也可以从外设活动中产生。 开漏输出等所有引脚选项对所有主设备和外设都有效。  注意，外设复用、master 设置和引脚配置只能由 CPU1...</div></div></div></a><a class="pagination-related" href="/2024/10/21/TI_DSP_TMS320F28377D_%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F/" title="TI_DSP_TMS320F28377D_存储系统"><img class="cover" src="/private_img/cover.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-21</div><div class="info-item-2">TI_DSP_TMS320F28377D_存储系统</div></div><div class="info-2"><div class="info-item-1">RAM 对于2837xD，RAM可分为不同几部分：  RAM的分类 专用RAM 每个CPU子系统有四个专用的RAM，只有对应的CPU可以访问这些RAM：  M0、M1： D0、D1：是安全存储器，具有访问保护功能，可为其分别配置不同类型的访问保护。  Local Share RAM（LSx RAM） 只能由对应CPU及其CLA访问的RAM。 这些RAM都是安全存储器，具有访问保护功能，可为其分别配置不同类型的访问保护。 具有奇偶校验特性。 默认情况下，仅专用于CPU，CLA想要访问需要进行配置。 Global Share RAM（GSx RAM） 每个共享RAM可设置为由一CPU拥有，该CPU及其DMA对此RAM具有完全的读写访问权， 此时另一CPU只允许进行读取。 这些RAM是安全存储器，具有访问保护功能，可为其分别配置不同类型的访问保护。 每个GSx RAM模块的主机选择和访问保护配置可通过程序单独锁定， 此情况下一旦为其提交配置，在发出CPUx.SYSRS（复位）之间都不能更改配置。 只有CPU1...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/private_img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">YILON</div><div class="author-info-description">YILON的技术小窝</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">88</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">93</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">24</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/YILON"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/YILON" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:yilongdyx@163.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">Welcome</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">中断</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E8%AE%BE%E4%B8%AD%E6%96%AD"><span class="toc-number">1.1.</span> <span class="toc-text">外设中断</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AD%E6%96%AD%E7%9B%B8%E5%85%B3%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.</span> <span class="toc-text">中断相关常用函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AD%E6%96%AD%E4%BE%8B%E7%A8%8B"><span class="toc-number">1.3.</span> <span class="toc-text">中断例程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E4%B8%8E%E4%B8%8D%E5%8F%AF%E5%B1%8F%E8%94%BD%E4%B8%AD%E6%96%AD%EF%BC%88NMI%EF%BC%89"><span class="toc-number">1.4.</span> <span class="toc-text">异常与不可屏蔽中断（NMI）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NMI%E6%9D%A5%E6%BA%90"><span class="toc-number">1.5.</span> <span class="toc-text">NMI来源</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/09/10/FPGA_RTL%E8%AE%BE%E8%AE%A1%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E4%B8%8E%E6%8A%80%E5%B7%A7/" title="FPGA_RTL设计的注意事项与技巧.md"><img src="/private_img/cover.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="FPGA_RTL设计的注意事项与技巧.md"/></a><div class="content"><a class="title" href="/2025/09/10/FPGA_RTL%E8%AE%BE%E8%AE%A1%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E4%B8%8E%E6%8A%80%E5%B7%A7/" title="FPGA_RTL设计的注意事项与技巧.md">FPGA_RTL设计的注意事项与技巧.md</a><time datetime="2025-09-10T02:00:11.000Z" title="发表于 2025-09-10 10:00:11">2025-09-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/05/16/TI_DSP_TMS320F2812_CAN/" title="TI_DSP_TMS320F2812_CAN"><img src="/private_img/cover.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TI_DSP_TMS320F2812_CAN"/></a><div class="content"><a class="title" href="/2025/05/16/TI_DSP_TMS320F2812_CAN/" title="TI_DSP_TMS320F2812_CAN">TI_DSP_TMS320F2812_CAN</a><time datetime="2025-05-16T01:38:37.000Z" title="发表于 2025-05-16 09:38:37">2025-05-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/26/FPGA_%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84/" title="FPGA_基本结构"><img src="/private_img/cover.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="FPGA_基本结构"/></a><div class="content"><a class="title" href="/2024/12/26/FPGA_%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84/" title="FPGA_基本结构">FPGA_基本结构</a><time datetime="2024-12-26T01:33:15.000Z" title="发表于 2024-12-26 09:33:15">2024-12-26</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/private_img/Top.svg);"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2025 By YILON</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (false) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>