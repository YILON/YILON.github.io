<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>TI_DSP_TMS320F2812_事件管理器（一）__定时器GP与比较单元 | YILON</title><meta name="author" content="YILON"><meta name="copyright" content="YILON"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="事件管理器概述 每个281x处理器包含EVA、EVB2个事件管理器， 二者功能基本相同，只是模块外部接口和信号有所不同。 每个事件管理器包含：  通用定时器GP 比较器 PWM单元 捕获单元 正交编码脉冲电路QEP  一般应用在PWM控制电机， 或直接用PWM输出作为A&#x2F;D转换使用。  每个事件管理器都有独属的控制逻辑模块， 能够响应来自PIE的中断请求， 从而实现事件管理器的各种操作模式。 通用">
<meta property="og:type" content="article">
<meta property="og:title" content="TI_DSP_TMS320F2812_事件管理器（一）__定时器GP与比较单元">
<meta property="og:url" content="http://example.com/2023/10/28/TI_DSP_TMS320F2812_%E4%BA%8B%E4%BB%B6%E7%AE%A1%E7%90%86%E5%99%A8%EF%BC%88%E4%B8%80%EF%BC%89__%E5%AE%9A%E6%97%B6%E5%99%A8GP%E4%B8%8E%E6%AF%94%E8%BE%83%E5%8D%95%E5%85%83/index.html">
<meta property="og:site_name" content="YILON">
<meta property="og:description" content="事件管理器概述 每个281x处理器包含EVA、EVB2个事件管理器， 二者功能基本相同，只是模块外部接口和信号有所不同。 每个事件管理器包含：  通用定时器GP 比较器 PWM单元 捕获单元 正交编码脉冲电路QEP  一般应用在PWM控制电机， 或直接用PWM输出作为A&#x2F;D转换使用。  每个事件管理器都有独属的控制逻辑模块， 能够响应来自PIE的中断请求， 从而实现事件管理器的各种操作模式。 通用">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/private_img/cover.svg">
<meta property="article:published_time" content="2023-10-28T00:00:10.000Z">
<meta property="article:modified_time" content="2023-11-13T02:42:08.911Z">
<meta property="article:author" content="YILON">
<meta property="article:tag" content="嵌入式">
<meta property="article:tag" content="DSP">
<meta property="article:tag" content="TI_DSP_TMS320F2812">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/private_img/cover.svg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2023/10/28/TI_DSP_TMS320F2812_%E4%BA%8B%E4%BB%B6%E7%AE%A1%E7%90%86%E5%99%A8%EF%BC%88%E4%B8%80%EF%BC%89__%E5%AE%9A%E6%97%B6%E5%99%A8GP%E4%B8%8E%E6%AF%94%E8%BE%83%E5%8D%95%E5%85%83/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'TI_DSP_TMS320F2812_事件管理器（一）__定时器GP与比较单元',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-color: #4582A0;"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/private_img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">93</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">92</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">24</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/private_img/cover.svg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">YILON</span></a><a class="nav-page-title" href="/"><span class="site-name">TI_DSP_TMS320F2812_事件管理器（一）__定时器GP与比较单元</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">TI_DSP_TMS320F2812_事件管理器（一）__定时器GP与比较单元</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-10-28T00:00:10.000Z" title="发表于 2023-10-28 08:00:10">2023-10-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-11-13T02:42:08.911Z" title="更新于 2023-11-13 10:42:08">2023-11-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/">嵌入式</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/DSP/">DSP</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1>事件管理器概述</h1>
<p>每个281x处理器包含EVA、EVB2个事件管理器，<br>
二者功能基本相同，只是模块外部接口和信号有所不同。</p>
<p>每个事件管理器包含：</p>
<ul>
<li>通用定时器GP</li>
<li>比较器</li>
<li>PWM单元</li>
<li>捕获单元</li>
<li>正交编码脉冲电路QEP</li>
</ul>
<p>一般应用在PWM控制电机，<br>
或直接用PWM输出作为A/D转换使用。<br>
<img src="./%E4%BA%8B%E4%BB%B6%E7%AE%A1%E7%90%86%E5%99%A8%E7%BB%93%E6%9E%84.png" alt="事件管理器结构"></p>
<p>每个事件管理器都有独属的控制逻辑模块，<br>
能够响应来自PIE的中断请求，<br>
从而实现事件管理器的各种操作模式。</p>
<h1>通用定时器</h1>
<p>每个事件管理器包含2个通用定时器，<br>
EVA使用定时器GP1、2，<br>
EVB使用定时器GP3、4.</p>
<p>每个通用定时器都可以独立使用，<br>
也可以多个定时器彼此同步使用。<br>
通用定时器的比较寄存器用作比较功能时可以产生PWM波形。</p>
<p>当定时器工作在增或增减模式时，<br>
有3种连续工作方式，<br>
可使用可编程预定标的内部或外部时钟。</p>
<p>通用定时器还为事件管理器的每个子模块提供基准时钟：<br>
GP1为比较器和PWM电路提供，<br>
GP2为捕获单元和QEP提供。</p>
<p>通用定时器的周期寄存器和比较寄存器有双缓冲，<br>
允许用户根据需要对定时器周期和PWM占空比进行编程。</p>
<p><img src="./%E9%80%9A%E7%94%A8%E5%AE%9A%E6%97%B6%E5%99%A8%E7%BB%93%E6%9E%84.png" alt="通用定时器结构"></p>
<ul>
<li>
<p>全局控制寄存器GPTCONA/B<br>
确定GP实现具体任务需要采取的操作方式，并设置定时器的计数方向。<br>
GPTCONA/B可读/写，<br>
对其状态位进行写操作不影响原有数据。</p>
</li>
<li>
<p>定时器时钟源<br>
可取<code>外部输入信号(TCLKIN)</code>、<code>QEP</code>、<code>内部时钟HSPCLK</code><br>
由定时器控制器的4、5位选择<br>
选用HPSCLK时，要注意预定标对定时器计数周期的影响</p>
</li>
<li>
<p>后台寄存器<br>
类似于双缓冲，能够在当前周期为下一个周期设置比较寄存器/周期寄存器的值</p>
</li>
</ul>
<h2 id="通用定时器计数模式">通用定时器计数模式</h2>
<p>通过TENABLE可以使能或禁止定时器计数操作：<br>
当定时器被禁止时，定时器的计数器操作也被禁止，并且定时器的预定标器也被复位为x/1；</p>
<p>当使能定时器时，定时器按照设置的计数模式开始计数。</p>
<p>通过控制寄存器TxCON的TMODE1~TMODE0位设置定时器的计数模式：</p>
<blockquote>
<ul>
<li>停止/保持
<ul>
<li>定时器停止计数并保持在当前状态</li>
</ul>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>连续递增计数
<ul>
<li>GP按照预定标的输入时钟计数，<br>
在定时器的计数值等于装载值的下一个输入时钟上升沿复位为0，GP下溢标志位置位，并重新开始计数</li>
<li>如果GP下溢标志位未被屏蔽，则置位后产生一个外设中断请求。如果该中断可由GPTCONA/B寄存器中的相应位选定用来启动ADC。</li>
<li>假设计数器开始计数时为0，则：<br>
<code>定时器周期=(TXPR + 1)</code>个定标后的时钟周期<br>
（如果计数器开始计数时不为0，则第一个计数周期不足时间）</li>
<li>注意当计数器初始值大于周期寄存器的值时，<br>
则要计数到溢出(0xFFFF+1)后才清零，开始新一周期</li>
<li>此模式下GPTCONA/B的计数方向标识位=1（1表示递增，0表示递减）</li>
<li>时钟源可选择内部CPU时钟或外部时钟</li>
<li>注意计数方向引脚TDIRA/B输入无效</li>
</ul>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>定向递增/递减计数
<ul>
<li>此模式下根据计数方向引脚TDIRA/B输入进行递增/递减计数：
<ul>
<li>当该引脚保持为高电平时，RP递增计数直到周期寄存器的值，然后下一时钟周期归零，重新开始计数<br>
（如果计数器初始值大于周期寄存器的值时则要计数到溢出(0xFFFF+1)后才清零，开始新一周期）；</li>
<li>当该引脚保持为低电平时，RP递减计数直到为0，然后下一时钟周期重新装载计数值，重新开始计数；</li>
</ul>
</li>
<li>周期、下溢、上溢中断标志位在对应事件中被置位，发送对应中断信号</li>
<li>注意当计数方向引脚(TDIRA/B)的电平变化后，要等到当前计数周期完成后才会改变计数方向</li>
<li>时钟源可选择内部CPU时钟或外部时钟</li>
</ul>
</li>
</ul>
<p>一般GP2/4的定向递增增/递减模式与QEP电路结合使用，<br>
QEP电路为GP2/4提供时钟与计数方向。<br>
在运动/电机控制和功率电子应用领域可以确定外部事件发生的时间</p>
</blockquote>
<blockquote>
<ul>
<li>连续增/减计数
<ul>
<li>引脚TDIRA/B不再影响计数方向，<br>
而是GP计数方向轮流切换，<br>
即计数器递增计数到设定值TxPR后，开始递减直至0，然后又递增计数</li>
<li>周期、下溢、上溢中断标志位在对应事件中照常被置位，发送对应中断信号</li>
<li>显然此时<code>计数周期=2×TxPR</code>（以周期标志位被触置位的两次之间为一个计数周期）</li>
<li>当计数值递减至0时，GPTCONA/B的计数方向标识位为1（1表示递增，0表示递减）</li>
<li>时钟源可选择内部CPU时钟或外部时钟</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="定时器的比较单元">定时器的比较单元</h2>
<p>每个GP都有一个<code>比较寄存器TxCMPR</code>。<br>
通过TxCON[1]位使能比较操作。<br>
GP的计数值TxINT会持续与相关的比较寄存器的值进行比较，当二值相等时，就产生<strong>比较匹配</strong>：</p>
<ul>
<li>匹配1个时钟周期后，定时器的比较中断标志位置位；<br>
（可设置GPTCONA/B的相应位使该标志位置位时启动A/D转换器），<br>
如果比较中断未被屏蔽，则产生一个外设中断申请；</li>
<li>匹配1个CPU时钟周期后，根据GPTCONA/B相应位的配置情况，PWM的输出将出现跳变；</li>
</ul>
<p><img src="./%E9%80%9A%E7%94%A8%E5%AE%9A%E6%97%B6%E5%99%A8%E6%AF%94%E8%BE%83%E6%93%8D%E4%BD%9C%E5%8A%9F%E8%83%BD%E6%A1%86%E5%9B%BE.png" alt="通用定时器比较操作功能框图"></p>
<h3 id="定时器PWM输出-TxPWM-逻辑控制">定时器PWM输出(TxPWM)逻辑控制</h3>
<blockquote>
<p>由GP与比较器的输出机制可以得知一种PWM调制方法：<br>
在连续递增计数模式下，<br>
定时器的计数值与时间的关系是一个<code>锯齿波</code>；<br>
此时定时器的计数周期即为锯齿波周期；</p>
<p>在连续增/减计数模式下，<br>
定时器的计数值与时间的关系是一个<code>三角波</code>。<br>
此时定时器的计数周期即为三角波周期；</p>
<p>让比较寄存器TxCMPR的值随调制波变化，<br>
那么只要让PWM输出的电平在“比较匹配点”和“置零点”时按一定规则切换，<br>
则可以实现输出脉宽随TxCMPR的值（调制波赋值）变化。</p>
</blockquote>
<p><img src="./%E5%AE%9A%E6%97%B6%E5%99%A8%E8%B0%83%E5%88%B6%E5%8E%9F%E7%90%86.png" alt="定时器调制原理"></p>
<p>具体地，定时器计数模式与PWM电平切换关系为：</p>
<ul>
<li>
<p>对于连续递增计数模式</p>
</li>
<li>
<p>遇到比较匹配点时将PWM电平切换为有效</p>
</li>
<li>
<p>遇到归零点(TxPR +1)时PWM电平切换为无效</p>
</li>
<li>
<p>为了PWM输出没有毛刺，</p>
<ul>
<li>如果 TxCMPR = 0，则整个计数周期有效（不会跳变），即使计数值复位为0，输出也不会变化</li>
<li>如果 TxCMPR &gt; TxPR，则整个计数周期无效，即使计数值复位为0，输出也不会变化</li>
</ul>
</li>
<li>
<p>对于连续增/减计数模式</p>
</li>
<li>
<p>每次递增/递减时遇到比较匹配点时将PWM电平翻转</p>
</li>
<li>
<p>注意递减至0时PWM电平不会翻转</p>
</li>
<li>
<p>如果TxCMPR &gt; TxPR，则没有比较匹配，即PWM电平不会翻转</p>
</li>
</ul>
<p>特别要注意的是：</p>
<blockquote>
<p><code>这里的有/无效逻辑与调制逻辑是相反的</code><br>
调制时期望调制波的幅值越大，对应的脉宽（有效区间）也长，<br>
但是这里的逻辑是TxCMPR的值越大，对应的有效区间就越小。<br>
即这里的有效区间实际上为无效区间。</p>
</blockquote>
<p>TxPWM的高/低电平与有/无效关系可以设置。<br>
PWM输出有四种模式可设置：</p>
<ul>
<li>高电平有效</li>
<li>低电平有效</li>
<li>强制高
<ul>
<li>输出立即置位</li>
</ul>
</li>
<li>强制低
<ul>
<li>输出立即置零</li>
</ul>
</li>
</ul>
<p>此外，当出现以下情况之一时，<br>
TxPWM输出被置为高阻状态：</p>
<ul>
<li>软件将GPTCONA/B[6]清零；</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mrow><mi mathvariant="normal">P</mi><mi mathvariant="normal">D</mi><mi mathvariant="normal">P</mi><mi mathvariant="normal">I</mi><mi mathvariant="normal">N</mi><mi mathvariant="normal">T</mi><mi mathvariant="normal">x</mi></mrow><mo stretchy="true">‾</mo></mover></mrow><annotation encoding="application/x-tex">\overline{\rm{PDPINTx}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8833em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathrm">PDPINTx</span></span></span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span></span></span></span>引脚被拉低且没有屏蔽；</li>
<li>任何一个复位信号产生；</li>
<li>软件将TxCON[1]清零</li>
</ul>
<h4 id="TxPWM的占空比计算">TxPWM的占空比计算</h4>
<ul>
<li>
<p>对于连续递增计数模式，<br>
比较寄存器的值代表了即无效相位的长度，即</p>
<ul>
<li>无效时间 = 定标的输入时钟周期 × TxCMPR</li>
<li><code>有效时间 = ( 2 × TxPR - TxCMPR + 1 ) × 定标的输入时钟周期</code></li>
<li><code>占空比 = ( TxPR - TxCMPR + 1 ) / ( TxPR + 1 )</code></li>
</ul>
</li>
<li>
<p>对于连续增/减计数模式</p>
<ul>
<li><code>有效时间 = [ 2 × TxPR - (TxCMPR_up + TxCMPR_down) ] × 定标的输入时钟周期 × 2</code><br>
（这里TxCMPR_up与TxCMPR_down是用来指代递增时和递减时TxCMPR的值）</li>
<li><code>占空比 = [ 2 × TxPR - (TxCMPR_up + TxCMPR_down) ] /  TxPR</code></li>
</ul>
</li>
</ul>
<h1>事件管理器的比较单元</h1>
<p>除了通用定时器中的比较单元，<br>
每个事件管理器本身也有三个比较单元：<br>
<img src="./%E4%BA%8B%E4%BB%B6%E7%AE%A1%E7%90%86%E5%99%A8%E6%AF%94%E8%BE%83%E5%8D%95%E5%85%83.png" alt="EVa比较单元"></p>
<p>事件管理器的比较单元的时钟基准由GP1(给EVa)和GP3(给EVb)提供，<br>
每个比较单元可输出2个<code>互补的</code>PWM波。</p>
<p>事件管理器比较单元的结构与定时器比较单元的结构几乎一样。</p>
<p>以EVA的比较单元为例：<br>
<img src="./%E4%BA%8B%E4%BB%B6%E7%AE%A1%E7%90%86%E5%99%A8%E6%AF%94%E8%BE%83%E5%8D%95%E5%85%83%E7%BB%93%E6%9E%84.png" alt="事件管理器比较单元结构"></p>
<p>EVA的比较单元由<code>操作寄存器ACTRA</code>和<code>通用控制寄存器COMCONA</code>控制。<br>
输出的PWM波形也有四种模式：</p>
<ul>
<li>高电平有效</li>
<li>低电平有效</li>
<li>强制高
<ul>
<li>输出立即置位</li>
</ul>
</li>
<li>强制低
<ul>
<li>输出立即置零</li>
</ul>
</li>
</ul>
<p>此外，当出现以下情况之一时，<br>
比较单元的PWM输出被置为高阻状态：</p>
<ul>
<li>软件将COMCONA/B[9]清零；</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mrow><mi mathvariant="normal">P</mi><mi mathvariant="normal">D</mi><mi mathvariant="normal">P</mi><mi mathvariant="normal">I</mi><mi mathvariant="normal">N</mi><mi mathvariant="normal">T</mi><mi mathvariant="normal">x</mi></mrow><mo stretchy="true">‾</mo></mover></mrow><annotation encoding="application/x-tex">\overline{\rm{PDPINTx}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8833em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathrm">PDPINTx</span></span></span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span></span></span></span>引脚被拉低且没有屏蔽；</li>
<li>任何一个复位信号产生；</li>
</ul>
<h1>死区控制</h1>
<p>EVA与EVB都有独立的<code>16位可编程死区控制单元DBTCONA/B</code>，<br>
死区控制单元结构为：<br>
<img src="./%E6%AD%BB%E5%8C%BA%E6%8E%A7%E5%88%B6%E9%80%BB%E8%BE%91.png" alt="死区控制逻辑"><br>
（死区控制单元也有一个比较逻辑，不要与EVA/B的比较单元弄混了）</p>
<p>PHx是事件管理器比较单元x输出的未加死区的PWM波，<br>
经过死区控制单元后输出互补的带死区的PWM波DTPHx/DTPHx_。<br>
添加死区本质上就是让PWM波的跳变沿延时一段时间(死区)：<br>
<img src="./%E6%AD%BB%E5%8C%BA%E6%97%B6%E5%BA%8F%E5%AF%B9%E6%AF%94.png" alt="死区时序对比"></p>
<p>设死区控制寄存器DBTCONx[11~8]的值为m<br>
死区预定标参数(对应DBTCONx[4~2])为x/p<br>
则死区大小为<code>(p × m)个HSPCLK时钟周期</code></p>
<h1>通用定时器GP的相关寄存器</h1>
<p>GP相关寄存器有：<br>
<img src="./GP%E7%9B%B8%E5%85%B3%E5%AF%84%E5%AD%98%E5%99%A8.png" alt="GP相关寄存器"></p>
<h2 id="通用定时器全局控制寄存器GPTCONA">通用定时器全局控制寄存器GPTCONA</h2>
<p><img src="./GPA%E5%85%A8%E5%B1%80%E6%8E%A7%E5%88%B6%E5%AF%84%E5%AD%98%E5%99%A8.png" alt="GPA全局控制寄存器"></p>
<h2 id="通用定时器控制寄存器TxCON">通用定时器控制寄存器TxCON</h2>
<p><img src="./GPA%E6%8E%A7%E5%88%B6%E5%AF%84%E5%AD%98%E5%99%A8.png" alt="GPA控制寄存器"></p>
<h1>比较单元相关寄存器</h1>
<p><img src="./%E6%AF%94%E8%BE%83%E5%8D%95%E5%85%83%E7%9B%B8%E5%85%B3%E5%AF%84%E5%AD%98%E5%99%A8.png" alt="比较单元相关寄存器"></p>
<h2 id="比较控制寄存器">比较控制寄存器</h2>
<p><img src="./%E6%AF%94%E8%BE%83%E6%8E%A7%E5%88%B6%E5%AF%84%E5%AD%98%E5%99%A8.png" alt="比较控制寄存器"></p>
<h2 id="比较方式控制寄存器">比较方式控制寄存器</h2>
<p><img src="./%E6%AF%94%E8%BE%83%E6%96%B9%E5%BC%8F%E6%8E%A7%E5%88%B6%E5%AF%84%E5%AD%98%E5%99%A8.png" alt="比较方式控制寄存器"></p>
<h2 id="死区设置寄存器">死区设置寄存器</h2>
<p><img src="./%E6%AD%BB%E5%8C%BA%E8%AE%BE%E7%BD%AE%E5%AF%84%E5%AD%98%E5%99%A8.png" alt="死区设置寄存器"></p>
<h2 id="EV扩展控制寄存器">EV扩展控制寄存器</h2>
<p><img src="./EV%E6%89%A9%E5%B1%95%E6%8E%A7%E5%88%B6%E5%AF%84%E5%AD%98%E5%99%A8.png" alt="EV扩展控制寄存器"></p>
<h1>事件管理器相关结构体的定义</h1>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//DSP281x_Ev.h</span></span><br><span class="line"><span class="comment">// TI File $Revision: /main/4 $</span></span><br><span class="line"><span class="comment">// Checkin $Date: June 22, 2007   09:30:33 $</span></span><br><span class="line"><span class="comment">//###########################################################################</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// FILE:	DSP281x_Ev.h</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// TITLE:	DSP281x Device Event Manager Register Definitions.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//###########################################################################</span></span><br><span class="line"><span class="comment">// $TI Release: DSP281x C/C++ Header Files V1.20 $</span></span><br><span class="line"><span class="comment">// $Release Date: July 27, 2009 $</span></span><br><span class="line"><span class="comment">//###########################################################################</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> DSP281x_EV_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DSP281x_EV_H</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __cplusplus</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> &#123;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* --------------------------------------------------- */</span></span><br><span class="line"><span class="comment">/* F2810/12 Event Manager (EV) GP Timer Registers      */</span></span><br><span class="line"><span class="comment">/*                                                     */</span></span><br><span class="line"><span class="comment">/* ----------------------------------------------------*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Overall Timer Control Register */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">GPTCONA_BITS</span>  &#123;</span></span><br><span class="line">   Uint16 T1PIN:<span class="number">2</span>;         <span class="comment">// 1:0   Polarity of GP timer 1 compare</span></span><br><span class="line">   Uint16 T2PIN:<span class="number">2</span>;         <span class="comment">// 3:2   Polarity of GP timer 2 compare</span></span><br><span class="line">   Uint16 T1CMPOE:<span class="number">1</span>;       <span class="comment">// 4     Timer1 compare output</span></span><br><span class="line">   Uint16 T2CMPOE:<span class="number">1</span>;       <span class="comment">// 5     Timer2 compare output</span></span><br><span class="line">   Uint16 TCMPOE:<span class="number">1</span>;        <span class="comment">// 6     Compare output enable</span></span><br><span class="line">   Uint16 T1TOADC:<span class="number">2</span>;       <span class="comment">// 8:7   Start ADC with timer 1 event</span></span><br><span class="line">   Uint16 T2TOADC:<span class="number">2</span>;       <span class="comment">// 10:9  Start ADC with timer 2 event</span></span><br><span class="line">   Uint16 T1CTRIPE:<span class="number">1</span>;      <span class="comment">// 11    Enable Timer 1 compare trip</span></span><br><span class="line">   Uint16 T2CTRIPE:<span class="number">1</span>;      <span class="comment">// 12    Enable Timer 2 compare trip</span></span><br><span class="line">   Uint16 T1STAT:<span class="number">1</span>;        <span class="comment">// 13    GP Timer 1 status (read only)</span></span><br><span class="line">   Uint16 T2STAT:<span class="number">1</span>;        <span class="comment">// 14    GP Timer 2 status (read only)</span></span><br><span class="line">   Uint16 rsvd:<span class="number">1</span>;          <span class="comment">// 15    reserved</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">GPTCONA_REG</span> &#123;</span></span><br><span class="line">   Uint16        all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">GPTCONA_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">GPTCONB_BITS</span>  &#123;</span></span><br><span class="line">   Uint16 T3PIN:<span class="number">2</span>;         <span class="comment">// 1:0   Polarity of GP timer 3 compare</span></span><br><span class="line">   Uint16 T4PIN:<span class="number">2</span>;         <span class="comment">// 3:2   Polarity of GP timer 4 compare</span></span><br><span class="line">   Uint16 T3CMPOE:<span class="number">1</span>;       <span class="comment">// 4     Timer3 compare output</span></span><br><span class="line">   Uint16 T4CMPOE:<span class="number">1</span>;       <span class="comment">// 5     Timer4 compare output</span></span><br><span class="line">   Uint16 TCMPOE:<span class="number">1</span>;        <span class="comment">// 6     Compare output enable</span></span><br><span class="line">   Uint16 T3TOADC:<span class="number">2</span>;       <span class="comment">// 8:7   Start ADC with timer 3 event</span></span><br><span class="line">   Uint16 T4TOADC:<span class="number">2</span>;       <span class="comment">// 10:9  Start ADC with timer 4 event</span></span><br><span class="line">   Uint16 T3CTRIPE:<span class="number">1</span>;      <span class="comment">// 11    Timer 3 trip enable</span></span><br><span class="line">   Uint16 T4CTRIPE:<span class="number">1</span>;      <span class="comment">// 12    Timer 4 trip enable</span></span><br><span class="line">   Uint16 T3STAT:<span class="number">1</span>;        <span class="comment">// 13    GP Timer 3 status (read only)</span></span><br><span class="line">   Uint16 T4STAT:<span class="number">1</span>;        <span class="comment">// 14    GP Timer 4 status (read only)</span></span><br><span class="line">   Uint16 rsvd2:<span class="number">1</span>;         <span class="comment">// 15    reserved</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">GPTCONB_REG</span> &#123;</span></span><br><span class="line">   Uint16        all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">GPTCONB_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Timer 1 Control Register bit defintions */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">T1CON_BITS</span>  &#123;</span></span><br><span class="line">   Uint16  rsvd1:<span class="number">1</span>;         <span class="comment">// 0     reserved</span></span><br><span class="line">   Uint16  TECMPR:<span class="number">1</span>;        <span class="comment">// 1     Timer compare enable</span></span><br><span class="line">   Uint16  TCLD10:<span class="number">2</span>;        <span class="comment">// 3:2   Timer copare register reload</span></span><br><span class="line">   Uint16  TCLKS10:<span class="number">2</span>;       <span class="comment">// 5:4   Clock source select</span></span><br><span class="line">   Uint16  TENABLE:<span class="number">1</span>;       <span class="comment">// 6     Timer enable</span></span><br><span class="line">   Uint16  rsvd2:<span class="number">1</span>;         <span class="comment">// 7     reserved</span></span><br><span class="line">   Uint16  TPS:<span class="number">3</span>;           <span class="comment">// 10:8  Input clock prescaler</span></span><br><span class="line">   Uint16  TMODE:<span class="number">2</span>;         <span class="comment">// 12:11 Count mode selection</span></span><br><span class="line">   Uint16  rsvd:<span class="number">1</span>;          <span class="comment">// 13    reserved</span></span><br><span class="line">   Uint16  SOFT:<span class="number">1</span>;          <span class="comment">// 14    Soft emulation control</span></span><br><span class="line">   Uint16  FREE:<span class="number">1</span>;          <span class="comment">// 15    Free emulation control</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">T1CON_REG</span> &#123;</span></span><br><span class="line">   Uint16             all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">T1CON_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Timer 2 Control Register bit defintions */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">T2CON_BITS</span>  &#123;</span></span><br><span class="line">   Uint16  SET1PR:<span class="number">1</span>;        <span class="comment">// 0     Period register select</span></span><br><span class="line">   Uint16  TECMPR:<span class="number">1</span>;        <span class="comment">// 1     Timer compare enable</span></span><br><span class="line">   Uint16  TCLD10:<span class="number">2</span>;        <span class="comment">// 3:2   Timer copare register reload</span></span><br><span class="line">   Uint16  TCLKS10:<span class="number">2</span>;       <span class="comment">// 5:4   Clock source select</span></span><br><span class="line">   Uint16  TENABLE:<span class="number">1</span>;       <span class="comment">// 6     Timer enable</span></span><br><span class="line">   Uint16  T2SWT1:<span class="number">1</span>;        <span class="comment">// 7     Start GP timer 2 with GP timer 1&#x27;s enable</span></span><br><span class="line">   Uint16  TPS:<span class="number">3</span>;           <span class="comment">// 10:8  Input clock prescaler</span></span><br><span class="line">   Uint16  TMODE:<span class="number">2</span>;         <span class="comment">// 12:11 Count mode selection</span></span><br><span class="line">   Uint16  rsvd:<span class="number">1</span>;          <span class="comment">// 13    reserved</span></span><br><span class="line">   Uint16  SOFT:<span class="number">1</span>;          <span class="comment">// 14    Soft emulation control</span></span><br><span class="line">   Uint16  FREE:<span class="number">1</span>;          <span class="comment">// 15    Free emulation control</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">T2CON_REG</span> &#123;</span></span><br><span class="line">   Uint16             all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">T2CON_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Timer 3 Control Register bit defintions */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">T3CON_BITS</span>  &#123;</span></span><br><span class="line">   Uint16  rsvd1:<span class="number">1</span>;         <span class="comment">// 0     reserved</span></span><br><span class="line">   Uint16  TECMPR:<span class="number">1</span>;        <span class="comment">// 1     Timer compare enable</span></span><br><span class="line">   Uint16  TCLD10:<span class="number">2</span>;        <span class="comment">// 3:2   Timer copare register reload</span></span><br><span class="line">   Uint16  TCLKS10:<span class="number">2</span>;       <span class="comment">// 5:4   Clock source select</span></span><br><span class="line">   Uint16  TENABLE:<span class="number">1</span>;       <span class="comment">// 6     Timer enable</span></span><br><span class="line">   Uint16  rsvd2:<span class="number">1</span>;         <span class="comment">// 7     reserved</span></span><br><span class="line">   Uint16  TPS:<span class="number">3</span>;           <span class="comment">// 10:8  Input clock prescaler</span></span><br><span class="line">   Uint16  TMODE:<span class="number">2</span>;         <span class="comment">// 12:11 Count mode selection</span></span><br><span class="line">   Uint16  rsvd:<span class="number">1</span>;          <span class="comment">// 13    reserved</span></span><br><span class="line">   Uint16  SOFT:<span class="number">1</span>;          <span class="comment">// 14    Soft emulation control</span></span><br><span class="line">   Uint16  FREE:<span class="number">1</span>;          <span class="comment">// 15    Free emulation control</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">T3CON_REG</span> &#123;</span></span><br><span class="line">   Uint16             all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">T3CON_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Timer 4 Control Register bit defintions */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">T4CON_BITS</span>  &#123;</span></span><br><span class="line">   Uint16  SET3PR:<span class="number">1</span>;        <span class="comment">// 0     Period register select</span></span><br><span class="line">   Uint16  TECMPR:<span class="number">1</span>;        <span class="comment">// 1     Timer compare enable</span></span><br><span class="line">   Uint16  TCLD10:<span class="number">2</span>;        <span class="comment">// 3:2   Timer copare register reload</span></span><br><span class="line">   Uint16  TCLKS10:<span class="number">2</span>;       <span class="comment">// 5:4   Clock source select</span></span><br><span class="line">   Uint16  TENABLE:<span class="number">1</span>;       <span class="comment">// 6     Timer enable</span></span><br><span class="line">   Uint16  T4SWT3:<span class="number">1</span>;        <span class="comment">// 7     Start GP timer 2 with GP timer 1&#x27;s enable</span></span><br><span class="line">   Uint16  TPS:<span class="number">3</span>;           <span class="comment">// 10:8  Input clock prescaler</span></span><br><span class="line">   Uint16  TMODE:<span class="number">2</span>;         <span class="comment">// 12:11 Count mode selection</span></span><br><span class="line">   Uint16  rsvd:<span class="number">1</span>;          <span class="comment">// 13    reserved</span></span><br><span class="line">   Uint16  SOFT:<span class="number">1</span>;          <span class="comment">// 14    Soft emulation control</span></span><br><span class="line">   Uint16  FREE:<span class="number">1</span>;          <span class="comment">// 15    Free emulation control</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">T4CON_REG</span> &#123;</span></span><br><span class="line">   Uint16             all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">T4CON_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EXTCONA_BITS</span> &#123;</span></span><br><span class="line">   Uint16   INDCOE:<span class="number">1</span>;        <span class="comment">// 0      Independant compare output</span></span><br><span class="line">   Uint16   QEPIQUAL:<span class="number">1</span>;      <span class="comment">// 1      QEP/CAP3 Index Qual Mode</span></span><br><span class="line">   Uint16   QEPIE:<span class="number">1</span>;         <span class="comment">// 2      QEP index enable</span></span><br><span class="line">   Uint16   EVSOCE:<span class="number">1</span>;        <span class="comment">// 3      EvA start of conversion output enable</span></span><br><span class="line">   Uint16   rsvd:<span class="number">12</span>;         <span class="comment">// 15:4   reserved</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">EXTCONA_REG</span> &#123;</span></span><br><span class="line">   Uint16        all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">EXTCONA_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EXTCONB_BITS</span> &#123;</span></span><br><span class="line">   Uint16   INDCOE:<span class="number">1</span>;        <span class="comment">// 0      Independant compare output</span></span><br><span class="line">   Uint16   QEPIQUAL:<span class="number">1</span>;      <span class="comment">// 1      QEP/CAP3 Index Qual Mode</span></span><br><span class="line">   Uint16   QEPIE:<span class="number">1</span>;         <span class="comment">// 2      QEP index enable</span></span><br><span class="line">   Uint16   EVSOCE:<span class="number">1</span>;        <span class="comment">// 3      EvB start of conversion output enable</span></span><br><span class="line">   Uint16   rsvd:<span class="number">12</span>;         <span class="comment">// 15:4   reserved</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">EXTCONB_REG</span> &#123;</span></span><br><span class="line">   Uint16               all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">EXTCONA_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Compare Control Register */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">COMCONA_BITS</span> &#123;</span></span><br><span class="line">   Uint16   C1TRIPE:<span class="number">1</span>;      <span class="comment">// 0      C1TRIP enable</span></span><br><span class="line">   Uint16   C2TRIPE:<span class="number">1</span>;      <span class="comment">// 1      C2TRIP enable</span></span><br><span class="line">   Uint16   C3TRIPE:<span class="number">1</span>;      <span class="comment">// 2      C3TRIP eanble</span></span><br><span class="line">   Uint16   rsvd:<span class="number">2</span>;         <span class="comment">// 4:3    reserved</span></span><br><span class="line">   Uint16   FCMP1OE:<span class="number">1</span>;      <span class="comment">// 5      Full compare 1 output enable</span></span><br><span class="line">   Uint16   FCMP2OE:<span class="number">1</span>;      <span class="comment">// 6      Full compare 2 output enable</span></span><br><span class="line">   Uint16   FCMP3OE:<span class="number">1</span>;      <span class="comment">// 7      Full compare 3 output enable</span></span><br><span class="line">   Uint16   PDPINTASTATUS:<span class="number">1</span>;<span class="comment">// 8      Current status of the PDPINTA pin</span></span><br><span class="line">   Uint16   FCOMPOE:<span class="number">1</span>;      <span class="comment">// 9      Compare output enable</span></span><br><span class="line">   Uint16   ACTRLD:<span class="number">2</span>;       <span class="comment">// 11:10  Action control register reload</span></span><br><span class="line">   Uint16   SVENABLE:<span class="number">1</span>;     <span class="comment">// 12     Space vector PWM Mode enable</span></span><br><span class="line">   Uint16   CLD:<span class="number">2</span>;          <span class="comment">// 14:13  Compare register reload condition</span></span><br><span class="line">   Uint16   CENABLE:<span class="number">1</span>;      <span class="comment">// 15     Compare enable</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">COMCONA_REG</span> &#123;</span></span><br><span class="line">   Uint16               all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">COMCONA_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">COMCONB_BITS</span> &#123;</span></span><br><span class="line">   Uint16   C4TRIPE:<span class="number">1</span>;      <span class="comment">// 0      C4TRIP enable</span></span><br><span class="line">   Uint16   C5TRIPE:<span class="number">1</span>;      <span class="comment">// 1      C5TRIP enable</span></span><br><span class="line">   Uint16   C6TRIPE:<span class="number">1</span>;      <span class="comment">// 2      C6TRIP eanble</span></span><br><span class="line">   Uint16   rsvd:<span class="number">2</span>;         <span class="comment">// 4:3    reserved</span></span><br><span class="line">   Uint16   FCMP4OE:<span class="number">1</span>;      <span class="comment">// 5      Full compare 4 output enable</span></span><br><span class="line">   Uint16   FCMP5OE:<span class="number">1</span>;      <span class="comment">// 6      Full compare 5 output enable</span></span><br><span class="line">   Uint16   FCMP6OE:<span class="number">1</span>;      <span class="comment">// 7      Full compare 6 output enable</span></span><br><span class="line">   Uint16   PDPINTBSTATUS:<span class="number">1</span>;<span class="comment">// 8      Current status of the PDPINTB pin</span></span><br><span class="line">   Uint16   FCOMPOE:<span class="number">1</span>;      <span class="comment">// 9      Compare output enable</span></span><br><span class="line">   Uint16   ACTRLD:<span class="number">2</span>;       <span class="comment">// 11:10  Action control register reload</span></span><br><span class="line">   Uint16   SVENABLE:<span class="number">1</span>;     <span class="comment">// 12     Space vector PWM Mode enable</span></span><br><span class="line">   Uint16   CLD:<span class="number">2</span>;          <span class="comment">// 14:13  Compare register reload condition</span></span><br><span class="line">   Uint16   CENABLE:<span class="number">1</span>;      <span class="comment">// 15     Compare enable</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">COMCONB_REG</span> &#123;</span></span><br><span class="line">   Uint16               all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">COMCONB_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Compare Action Control Register bit definitions */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ACTRA_BITS</span> &#123;</span></span><br><span class="line">   Uint16   CMP1ACT:<span class="number">2</span>;     <span class="comment">// 1:0    Action on compare output pin 1 CMP1</span></span><br><span class="line">   Uint16   CMP2ACT:<span class="number">2</span>;     <span class="comment">// 3:2    Action on compare output pin 2 CMP2</span></span><br><span class="line">   Uint16   CMP3ACT:<span class="number">2</span>;     <span class="comment">// 5:4    Action on compare output pin 3 CMP3</span></span><br><span class="line">   Uint16   CMP4ACT:<span class="number">2</span>;     <span class="comment">// 7:6    Action on compare output pin 4 CMP4</span></span><br><span class="line">   Uint16   CMP5ACT:<span class="number">2</span>;     <span class="comment">// 9:8    Action on compare output pin 5 CMP5</span></span><br><span class="line">   Uint16   CMP6ACT:<span class="number">2</span>;     <span class="comment">// 11:10  Action on compare output pin 6 CMP6</span></span><br><span class="line">   Uint16   D:<span class="number">3</span>;           <span class="comment">// 14:12  Basic vector bits</span></span><br><span class="line">   Uint16   SVRDIR:<span class="number">1</span>;      <span class="comment">// 15     Space vecor PWM rotation dir</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">ACTRA_REG</span> &#123;</span></span><br><span class="line">   Uint16             all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">ACTRA_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ACTRB_BITS</span> &#123;</span></span><br><span class="line">   Uint16   CMP7ACT:<span class="number">2</span>;     <span class="comment">// 1:0    Action on compare output pin 7 CMP7</span></span><br><span class="line">   Uint16   CMP8ACT:<span class="number">2</span>;     <span class="comment">// 3:2    Action on compare output pin 8 CMP8</span></span><br><span class="line">   Uint16   CMP9ACT:<span class="number">2</span>;     <span class="comment">// 5:4    Action on compare output pin 9 CMP9</span></span><br><span class="line">   Uint16   CMP10ACT:<span class="number">2</span>;    <span class="comment">// 7:6    Action on compare output pin 10 CMP10</span></span><br><span class="line">   Uint16   CMP11ACT:<span class="number">2</span>;    <span class="comment">// 9:8    Action on compare output pin 11 CMP11</span></span><br><span class="line">   Uint16   CMP12ACT:<span class="number">2</span>;    <span class="comment">// 11:10  Action on compare output pin 12 CMP12</span></span><br><span class="line">   Uint16   D:<span class="number">3</span>;           <span class="comment">// 14:12  Basic vector bits</span></span><br><span class="line">   Uint16   SVRDIR:<span class="number">1</span>;      <span class="comment">// 15     Space vecor PWM rotation dir</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">ACTRB_REG</span> &#123;</span></span><br><span class="line">   Uint16        all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">ACTRB_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Dead-Band Timer Control register bit definitions */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">DBTCON_BITS</span> &#123;</span></span><br><span class="line">   Uint16   rsvd1:<span class="number">2</span>;       <span class="comment">// 1:0    reserved</span></span><br><span class="line">   Uint16   DBTPS:<span class="number">3</span>;       <span class="comment">// 4:2    Dead-Band timer prescaler</span></span><br><span class="line">   Uint16   EDBT1:<span class="number">1</span>;       <span class="comment">// 5      Dead-Band timer 1 enable</span></span><br><span class="line">   Uint16   EDBT2:<span class="number">1</span>;       <span class="comment">// 6      Dead-Band timer 2 enable</span></span><br><span class="line">   Uint16   EDBT3:<span class="number">1</span>;       <span class="comment">// 7      Dead-Band timer 3 enable</span></span><br><span class="line">   Uint16   DBT:<span class="number">4</span>;         <span class="comment">// 11:8   Dead-Band timer period</span></span><br><span class="line">   Uint16   rsvd2:<span class="number">4</span>;       <span class="comment">// 15:12  reserved</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">DBTCON_REG</span> &#123;</span></span><br><span class="line">   Uint16        all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">DBTCON_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Capture Control register bit definitions */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CAPCONA_BITS</span> &#123;</span></span><br><span class="line">   Uint16  rsvd1:<span class="number">2</span>;         <span class="comment">// 1:0   reserved</span></span><br><span class="line">   Uint16  CAP3EDGE:<span class="number">2</span>;      <span class="comment">// 3:2   Edge Detection for Unit 3</span></span><br><span class="line">   Uint16  CAP2EDGE:<span class="number">2</span>;      <span class="comment">// 5:4   Edge Detection for Unit 2</span></span><br><span class="line">   Uint16  CAP1EDGE:<span class="number">2</span>;      <span class="comment">// 7:6   Edge Detection for Unit 1</span></span><br><span class="line">   Uint16  CAP3TOADC:<span class="number">1</span>;     <span class="comment">// 8     Unit 3 starts the ADC</span></span><br><span class="line">   Uint16  CAP12TSEL:<span class="number">1</span>;     <span class="comment">// 9     GP Timer selection for Units 1 and 2</span></span><br><span class="line">   Uint16  CAP3TSEL:<span class="number">1</span>;      <span class="comment">// 10    GP Timer selection for Unit 3</span></span><br><span class="line">   Uint16  rsvd2:<span class="number">1</span>;         <span class="comment">// 11    reserved</span></span><br><span class="line">   Uint16  CAP3EN:<span class="number">1</span>;        <span class="comment">// 12    Capture Unit 3 enable</span></span><br><span class="line">   Uint16  CAP12EN:<span class="number">2</span>;       <span class="comment">// 14:13 Capture Unit 1 and 2 enable</span></span><br><span class="line">   Uint16  CAPRES:<span class="number">1</span>;        <span class="comment">// 15    Capture reset (always reads 0)</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">CAPCONA_REG</span> &#123;</span></span><br><span class="line">   Uint16        all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">CAPCONA_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Control register bit definitions */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CAPCONB_BITS</span> &#123;</span></span><br><span class="line">   Uint16  rsvd1:<span class="number">2</span>;         <span class="comment">// 1:0   reserved</span></span><br><span class="line">   Uint16  CAP6EDGE:<span class="number">2</span>;      <span class="comment">// 3:2   Edge Detection for Unit 6</span></span><br><span class="line">   Uint16  CAP5EDGE:<span class="number">2</span>;      <span class="comment">// 5:4   Edge Detection for Unit 5</span></span><br><span class="line">   Uint16  CAP4EDGE:<span class="number">2</span>;      <span class="comment">// 7:6   Edge Detection for Unit 4</span></span><br><span class="line">   Uint16  CAP6TOADC:<span class="number">1</span>;     <span class="comment">// 8     Unit 6 starts the ADC</span></span><br><span class="line">   Uint16  CAP45TSEL:<span class="number">1</span>;     <span class="comment">// 9     GP Timer selection for Units 4 and 5</span></span><br><span class="line">   Uint16  CAP6TSEL:<span class="number">1</span>;      <span class="comment">// 10    GP Timer selection for Unit 6</span></span><br><span class="line">   Uint16  rsvd2:<span class="number">1</span>;         <span class="comment">// 11    reserved</span></span><br><span class="line">   Uint16  CAP6EN:<span class="number">1</span>;        <span class="comment">// 12    Capture Unit 6 control</span></span><br><span class="line">   Uint16  CAP45EN:<span class="number">2</span>;       <span class="comment">// 14:13 Capture Unit 4 and 5 control</span></span><br><span class="line">   Uint16  CAPRES:<span class="number">1</span>;        <span class="comment">// 15    Capture reset (always reads 0)</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">CAPCONB_REG</span> &#123;</span></span><br><span class="line">   Uint16        all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">CAPCONB_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Capture FIFO Status Register bit definitions */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CAPFIFOA_BITS</span>  &#123;</span></span><br><span class="line">   Uint16 rsvd1:<span class="number">8</span>;           <span class="comment">// 7:0   reserved</span></span><br><span class="line">   Uint16 CAP1FIFO:<span class="number">2</span>;        <span class="comment">// 9:8   CAP1 FIFO status</span></span><br><span class="line">   Uint16 CAP2FIFO:<span class="number">2</span>;        <span class="comment">// 11:10 CAP2 FIFO status</span></span><br><span class="line">   Uint16 CAP3FIFO:<span class="number">2</span>;        <span class="comment">// 13:12 CAP2 FIFO status</span></span><br><span class="line">   Uint16 rsvd2:<span class="number">2</span>;           <span class="comment">// 15:14 reserved</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">CAPFIFOA_REG</span> &#123;</span></span><br><span class="line">   Uint16        all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">CAPFIFOA_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Capture FIFO Status Register bit definitions */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CAPFIFOB_BITS</span>  &#123;</span></span><br><span class="line">   Uint16 rsvd1:<span class="number">8</span>;           <span class="comment">// 7:0   reserved</span></span><br><span class="line">   Uint16 CAP4FIFO:<span class="number">2</span>;        <span class="comment">// 9:8   CAP4 FIFO status</span></span><br><span class="line">   Uint16 CAP5FIFO:<span class="number">2</span>;        <span class="comment">// 11:10 CAP5 FIFO status</span></span><br><span class="line">   Uint16 CAP6FIFO:<span class="number">2</span>;        <span class="comment">// 13:12 CAP6 FIFO status</span></span><br><span class="line">   Uint16 rsvd2:<span class="number">2</span>;           <span class="comment">// 15:14 reserved</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">CAPFIFOB_REG</span> &#123;</span></span><br><span class="line">   Uint16        all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">CAPFIFOB_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Interrupt Mask Register bit definitions */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EVAIMRA_BITS</span> &#123;</span></span><br><span class="line">    Uint16  PDPINTA:<span class="number">1</span>;      <span class="comment">// 0       Enable PDPINTA</span></span><br><span class="line">    Uint16  CMP1INT:<span class="number">1</span>;      <span class="comment">// 1       Enable</span></span><br><span class="line">    Uint16  CMP2INT:<span class="number">1</span>;      <span class="comment">// 2       Enable</span></span><br><span class="line">    Uint16  CMP3INT:<span class="number">1</span>;      <span class="comment">// 3       Enable</span></span><br><span class="line">    Uint16  rsvd1:<span class="number">3</span>;        <span class="comment">// 6:4     reserved</span></span><br><span class="line">    Uint16  T1PINT:<span class="number">1</span>;       <span class="comment">// 7       Enable</span></span><br><span class="line">    Uint16  T1CINT:<span class="number">1</span>;       <span class="comment">// 8       Enable</span></span><br><span class="line">    Uint16  T1UFINT:<span class="number">1</span>;      <span class="comment">// 9       Enable</span></span><br><span class="line">    Uint16  T1OFINT:<span class="number">1</span>;      <span class="comment">// 10      Enable</span></span><br><span class="line">    Uint16  rsvd2:<span class="number">5</span>;        <span class="comment">// 15:11   reserved</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">EVAIMRA_REG</span> &#123;</span></span><br><span class="line">   Uint16         all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">EVAIMRA_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Interrupt Mask Register bit definitions */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EVBIMRA_BITS</span> &#123;</span></span><br><span class="line">    Uint16  PDPINTB:<span class="number">1</span>;      <span class="comment">// 0       Enable PDPINTB</span></span><br><span class="line">    Uint16  CMP4INT:<span class="number">1</span>;      <span class="comment">// 1       Enable</span></span><br><span class="line">    Uint16  CMP5INT:<span class="number">1</span>;      <span class="comment">// 2       Enable</span></span><br><span class="line">    Uint16  CMP6INT:<span class="number">1</span>;      <span class="comment">// 3       Enable</span></span><br><span class="line">    Uint16  rsvd1:<span class="number">3</span>;        <span class="comment">// 6:4     reserved</span></span><br><span class="line">    Uint16  T3PINT:<span class="number">1</span>;       <span class="comment">// 7       Enable</span></span><br><span class="line">    Uint16  T3CINT:<span class="number">1</span>;       <span class="comment">// 8       Enable</span></span><br><span class="line">    Uint16  T3UFINT:<span class="number">1</span>;      <span class="comment">// 9       Enable</span></span><br><span class="line">    Uint16  T3OFINT:<span class="number">1</span>;      <span class="comment">// 10      Enable</span></span><br><span class="line">    Uint16  rsvd2:<span class="number">5</span>;        <span class="comment">// 15:11   reserved</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">EVBIMRA_REG</span> &#123;</span></span><br><span class="line">   Uint16         all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">EVBIMRA_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EVAIMRB_BITS</span> &#123;</span></span><br><span class="line">   Uint16   T2PINT:<span class="number">1</span>;       <span class="comment">// 0       Enable</span></span><br><span class="line">   Uint16   T2CINT:<span class="number">1</span>;       <span class="comment">// 1       Enable</span></span><br><span class="line">   Uint16   T2UFINT:<span class="number">1</span>;      <span class="comment">// 2       Enable</span></span><br><span class="line">   Uint16   T2OFINT:<span class="number">1</span>;      <span class="comment">// 3       Enable</span></span><br><span class="line">   Uint16   rsvd1:<span class="number">12</span>;       <span class="comment">// 15:4    reserved</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">EVAIMRB_REG</span> &#123;</span></span><br><span class="line">   Uint16         all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">EVAIMRB_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EVBIMRB_BITS</span> &#123;</span></span><br><span class="line">   Uint16   T4PINT:<span class="number">1</span>;       <span class="comment">// 0       Enable</span></span><br><span class="line">   Uint16   T4CINT:<span class="number">1</span>;       <span class="comment">// 1       Enable</span></span><br><span class="line">   Uint16   T4UFINT:<span class="number">1</span>;      <span class="comment">// 2       Enable</span></span><br><span class="line">   Uint16   T4OFINT:<span class="number">1</span>;      <span class="comment">// 3       Enable</span></span><br><span class="line">   Uint16   rsvd1:<span class="number">12</span>;       <span class="comment">// 15:4    reserved</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">EVBIMRB_REG</span> &#123;</span></span><br><span class="line">   Uint16         all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">EVBIMRB_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EVAIMRC_BITS</span> &#123;</span></span><br><span class="line">    Uint16   CAP1INT:<span class="number">1</span>;     <span class="comment">// 0        Enable</span></span><br><span class="line">    Uint16   CAP2INT:<span class="number">1</span>;     <span class="comment">// 1        Enable</span></span><br><span class="line">    Uint16   CAP3INT:<span class="number">1</span>;     <span class="comment">// 2        Enable</span></span><br><span class="line">    Uint16   rsvd1:<span class="number">13</span>;      <span class="comment">// 15:3     reserved</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">EVAIMRC_REG</span> &#123;</span></span><br><span class="line">   Uint16         all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">EVAIMRC_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EVBIMRC_BITS</span> &#123;</span></span><br><span class="line">    Uint16   CAP4INT:<span class="number">1</span>;     <span class="comment">// 0        Enable</span></span><br><span class="line">    Uint16   CAP5INT:<span class="number">1</span>;     <span class="comment">// 1        Enable</span></span><br><span class="line">    Uint16   CAP6INT:<span class="number">1</span>;     <span class="comment">// 2        Enable</span></span><br><span class="line">    Uint16   rsvd1:<span class="number">13</span>;      <span class="comment">// 15:3     reserved</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">EVBIMRC_REG</span> &#123;</span></span><br><span class="line">   Uint16         all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">EVBIMRC_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Interrupt Flag Register bit definitions */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EVAIFRA_BITS</span> &#123;</span></span><br><span class="line">    Uint16  PDPINTA:<span class="number">1</span>;      <span class="comment">// 0       Flag PDPINTA</span></span><br><span class="line">    Uint16  CMP1INT:<span class="number">1</span>;      <span class="comment">// 1       Flag</span></span><br><span class="line">    Uint16  CMP2INT:<span class="number">1</span>;      <span class="comment">// 2       Flag</span></span><br><span class="line">    Uint16  CMP3INT:<span class="number">1</span>;      <span class="comment">// 3       Flag</span></span><br><span class="line">    Uint16  rsvd1:<span class="number">3</span>;        <span class="comment">// 6:4     reserved</span></span><br><span class="line">    Uint16  T1PINT:<span class="number">1</span>;       <span class="comment">// 7       Flag</span></span><br><span class="line">    Uint16  T1CINT:<span class="number">1</span>;       <span class="comment">// 8       Flag</span></span><br><span class="line">    Uint16  T1UFINT:<span class="number">1</span>;      <span class="comment">// 9       Flag</span></span><br><span class="line">    Uint16  T1OFINT:<span class="number">1</span>;      <span class="comment">// 10      Flag</span></span><br><span class="line">    Uint16  rsvd2:<span class="number">5</span>;        <span class="comment">// 15:11   reserved</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">EVAIFRA_REG</span> &#123;</span></span><br><span class="line">   Uint16         all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">EVAIMRA_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Interrupt Mask Register bit definitions */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EVBIFRA_BITS</span> &#123;</span></span><br><span class="line">    Uint16  PDPINTB:<span class="number">1</span>;      <span class="comment">// 0       Flag PDPINTB</span></span><br><span class="line">    Uint16  CMP4INT:<span class="number">1</span>;      <span class="comment">// 1       Flag</span></span><br><span class="line">    Uint16  CMP5INT:<span class="number">1</span>;      <span class="comment">// 2       Flag</span></span><br><span class="line">    Uint16  CMP6INT:<span class="number">1</span>;      <span class="comment">// 3       Flag</span></span><br><span class="line">    Uint16  rsvd1:<span class="number">3</span>;        <span class="comment">// 6:4     reserved</span></span><br><span class="line">    Uint16  T3PINT:<span class="number">1</span>;       <span class="comment">// 7       Flag</span></span><br><span class="line">    Uint16  T3CINT:<span class="number">1</span>;       <span class="comment">// 8       Flag</span></span><br><span class="line">    Uint16  T3UFINT:<span class="number">1</span>;      <span class="comment">// 9       Flag</span></span><br><span class="line">    Uint16  T3OFINT:<span class="number">1</span>;      <span class="comment">// 10      Flag</span></span><br><span class="line">    Uint16  rsvd2:<span class="number">5</span>;        <span class="comment">// 15:11   reserved</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">EVBIFRA_REG</span> &#123;</span></span><br><span class="line">   Uint16         all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">EVBIFRA_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EVAIFRB_BITS</span> &#123;</span></span><br><span class="line">   Uint16   T2PINT:<span class="number">1</span>;       <span class="comment">// 0       Flag</span></span><br><span class="line">   Uint16   T2CINT:<span class="number">1</span>;       <span class="comment">// 1       Flag</span></span><br><span class="line">   Uint16   T2UFINT:<span class="number">1</span>;      <span class="comment">// 2       Flag</span></span><br><span class="line">   Uint16   T2OFINT:<span class="number">1</span>;      <span class="comment">// 3       Flag</span></span><br><span class="line">   Uint16   rsvd1:<span class="number">12</span>;       <span class="comment">// 15:4    reserved</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">EVAIFRB_REG</span> &#123;</span></span><br><span class="line">   Uint16         all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">EVAIFRB_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EVBIFRB_BITS</span> &#123;</span></span><br><span class="line">   Uint16   T4PINT:<span class="number">1</span>;       <span class="comment">// 0       Flag</span></span><br><span class="line">   Uint16   T4CINT:<span class="number">1</span>;       <span class="comment">// 1       Flag</span></span><br><span class="line">   Uint16   T4UFINT:<span class="number">1</span>;      <span class="comment">// 2       Flag</span></span><br><span class="line">   Uint16   T4OFINT:<span class="number">1</span>;      <span class="comment">// 3       Flag</span></span><br><span class="line">   Uint16   rsvd1:<span class="number">12</span>;       <span class="comment">// 15:4    reserved</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">EVBIFRB_REG</span> &#123;</span></span><br><span class="line">   Uint16         all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">EVBIFRB_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EVAIFRC_BITS</span> &#123;</span></span><br><span class="line">    Uint16   CAP1INT:<span class="number">1</span>;     <span class="comment">// 0        Flag</span></span><br><span class="line">    Uint16   CAP2INT:<span class="number">1</span>;     <span class="comment">// 1        Flag</span></span><br><span class="line">    Uint16   CAP3INT:<span class="number">1</span>;     <span class="comment">// 2        Flag</span></span><br><span class="line">    Uint16   rsvd1:<span class="number">13</span>;      <span class="comment">// 15:3     reserved</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">EVAIFRC_REG</span> &#123;</span></span><br><span class="line">   Uint16         all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">EVAIFRC_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EVBIFRC_BITS</span> &#123;</span></span><br><span class="line">    Uint16   CAP4INT:<span class="number">1</span>;     <span class="comment">// 0        Flag</span></span><br><span class="line">    Uint16   CAP5INT:<span class="number">1</span>;     <span class="comment">// 1        Flag</span></span><br><span class="line">    Uint16   CAP6INT:<span class="number">1</span>;     <span class="comment">// 2        Flag</span></span><br><span class="line">    Uint16   rsvd1:<span class="number">13</span>;      <span class="comment">// 15:3     reserved</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Allow access to the bit fields or entire register */</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">EVBIFRC_REG</span> &#123;</span></span><br><span class="line">   Uint16         all;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span>  <span class="title">EVBIFRC_BITS</span> <span class="title">bit</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* EVA Register File */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EVA_REGS</span>  &#123;</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">GPTCONA_REG</span>  <span class="title">GPTCONA</span>;</span>   <span class="comment">//0x7400</span></span><br><span class="line">  Uint16             T1CNT;     <span class="comment">//0x7401</span></span><br><span class="line">  Uint16             T1CMPR;    <span class="comment">//0x7402</span></span><br><span class="line">  Uint16             T1PR;      <span class="comment">//0x7403</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">T1CON_REG</span>    <span class="title">T1CON</span>;</span>     <span class="comment">//0x7404</span></span><br><span class="line">  Uint16             T2CNT;     <span class="comment">//0x7405</span></span><br><span class="line">  Uint16             T2CMPR;    <span class="comment">//0x7406</span></span><br><span class="line">  Uint16             T2PR;      <span class="comment">//0x7407</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">T2CON_REG</span>    <span class="title">T2CON</span>;</span>     <span class="comment">//0x7408</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">EXTCONA_REG</span>  <span class="title">EXTCONA</span>;</span>   <span class="comment">//0x7409</span></span><br><span class="line">  Uint16             rsvd1[<span class="number">7</span>];  <span class="comment">//0x740A-10</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">COMCONA_REG</span>  <span class="title">COMCONA</span>;</span>	<span class="comment">//0x7411</span></span><br><span class="line">  Uint16             rsvd2;     <span class="comment">//0x7412</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">ACTRA_REG</span>    <span class="title">ACTRA</span>;</span>     <span class="comment">//0x7413</span></span><br><span class="line">  Uint16             rsvd3;     <span class="comment">//0x7414</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">DBTCON_REG</span>   <span class="title">DBTCONA</span>;</span>   <span class="comment">//0x7415</span></span><br><span class="line">  Uint16             rsvd4;     <span class="comment">//0x7416</span></span><br><span class="line">  Uint16             CMPR1;     <span class="comment">//0x7417</span></span><br><span class="line">  Uint16             CMPR2;     <span class="comment">//0x7418</span></span><br><span class="line">  Uint16             CMPR3;     <span class="comment">//0x7419</span></span><br><span class="line">  Uint16             rsvd5[<span class="number">6</span>];  <span class="comment">//0x741A-F</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">CAPCONA_REG</span>  <span class="title">CAPCONA</span>;</span>	<span class="comment">//0x7420</span></span><br><span class="line">  Uint16             rsvd6;     <span class="comment">//0x7421</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">CAPFIFOA_REG</span> <span class="title">CAPFIFOA</span>;</span>  <span class="comment">//0x7422</span></span><br><span class="line">  Uint16             CAP1FIFO;  <span class="comment">//0x7423</span></span><br><span class="line">  Uint16             CAP2FIFO;  <span class="comment">//0x7424</span></span><br><span class="line">  Uint16             CAP3FIFO;  <span class="comment">//0x7425</span></span><br><span class="line">  Uint16             rsvd7;     <span class="comment">//0x7426</span></span><br><span class="line">  Uint16             CAP1FBOT;  <span class="comment">//0x7427</span></span><br><span class="line">  Uint16             CAP2FBOT;  <span class="comment">//0x7428</span></span><br><span class="line">  Uint16             CAP3FBOT;  <span class="comment">//0x7429</span></span><br><span class="line">  Uint16             rsvd8[<span class="number">2</span>];  <span class="comment">//0x742A-B</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">EVAIMRA_REG</span>  <span class="title">EVAIMRA</span>;</span>	<span class="comment">//0x742C</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">EVAIMRB_REG</span>  <span class="title">EVAIMRB</span>;</span>	<span class="comment">//0x742D</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">EVAIMRC_REG</span>  <span class="title">EVAIMRC</span>;</span>	<span class="comment">//0x742E</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">EVAIFRA_REG</span>  <span class="title">EVAIFRA</span>;</span>	<span class="comment">//0x742F</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">EVAIFRB_REG</span>  <span class="title">EVAIFRB</span>;</span>	<span class="comment">//0x7430</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">EVAIFRC_REG</span>  <span class="title">EVAIFRC</span>;</span>	<span class="comment">//0x7431</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* EVB Register File */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EVB_REGS</span>  &#123;</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">GPTCONB_REG</span>  <span class="title">GPTCONB</span>;</span>	<span class="comment">//0x7500</span></span><br><span class="line">  Uint16             T3CNT;     <span class="comment">//0x7501</span></span><br><span class="line">  Uint16             T3CMPR;    <span class="comment">//0x7502</span></span><br><span class="line">  Uint16             T3PR;      <span class="comment">//0x7503</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">T3CON_REG</span>    <span class="title">T3CON</span>;</span>     <span class="comment">//0x7504</span></span><br><span class="line">  Uint16             T4CNT;     <span class="comment">//0x7505</span></span><br><span class="line">  Uint16             T4CMPR;    <span class="comment">//0x7506</span></span><br><span class="line">  Uint16             T4PR;      <span class="comment">//0x7507</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">T4CON_REG</span>    <span class="title">T4CON</span>;</span>     <span class="comment">//0x7508</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">EXTCONB_REG</span>  <span class="title">EXTCONB</span>;</span>   <span class="comment">//0x7509</span></span><br><span class="line">  Uint16             rsvd1[<span class="number">7</span>];  <span class="comment">//0x750A-10</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">COMCONB_REG</span>  <span class="title">COMCONB</span>;</span>   <span class="comment">//0x7511</span></span><br><span class="line">  Uint16             rsvd2;     <span class="comment">//0x7512</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">ACTRB_REG</span>    <span class="title">ACTRB</span>;</span>     <span class="comment">//0x7513</span></span><br><span class="line">  Uint16             rsvd3;     <span class="comment">//0x7514</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">DBTCON_REG</span>   <span class="title">DBTCONB</span>;</span>   <span class="comment">//0x7515</span></span><br><span class="line">  Uint16             rsvd4;     <span class="comment">//0x7516</span></span><br><span class="line">  Uint16             CMPR4;     <span class="comment">//0x7517</span></span><br><span class="line">  Uint16             CMPR5;     <span class="comment">//0x7518</span></span><br><span class="line">  Uint16             CMPR6;     <span class="comment">//0x7519</span></span><br><span class="line">  Uint16             rsvd5[<span class="number">6</span>];  <span class="comment">//0x751A-F</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">CAPCONB_REG</span>  <span class="title">CAPCONB</span>;</span>   <span class="comment">//0x7520</span></span><br><span class="line">  Uint16             rsvd6;     <span class="comment">//0x7521</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">CAPFIFOB_REG</span> <span class="title">CAPFIFOB</span>;</span>  <span class="comment">//0x7522</span></span><br><span class="line">  Uint16             CAP4FIFO;  <span class="comment">//0x7523</span></span><br><span class="line">  Uint16             CAP5FIFO;  <span class="comment">//0x7524</span></span><br><span class="line">  Uint16             CAP6FIFO;  <span class="comment">//0x7525</span></span><br><span class="line">  Uint16             rsvd7;     <span class="comment">//0x7526</span></span><br><span class="line">  Uint16             CAP4FBOT;  <span class="comment">//0x7527</span></span><br><span class="line">  Uint16             CAP5FBOT;  <span class="comment">//0x7528</span></span><br><span class="line">  Uint16             CAP6FBOT;  <span class="comment">//0x7529</span></span><br><span class="line">  Uint16             rsvd8[<span class="number">2</span>];  <span class="comment">//0x752A-B</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">EVBIMRA_REG</span>  <span class="title">EVBIMRA</span>;</span>   <span class="comment">//0x752C</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">EVBIMRB_REG</span>  <span class="title">EVBIMRB</span>;</span>   <span class="comment">//0x752D</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">EVBIMRC_REG</span>  <span class="title">EVBIMRC</span>;</span>   <span class="comment">//0x752E</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">EVBIFRA_REG</span>  <span class="title">EVBIFRA</span>;</span>   <span class="comment">//0x752F</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">EVBIFRB_REG</span>  <span class="title">EVBIFRB</span>;</span>   <span class="comment">//0x7530</span></span><br><span class="line">  <span class="class"><span class="keyword">union</span> <span class="title">EVBIFRC_REG</span>  <span class="title">EVBIFRC</span>;</span>   <span class="comment">//0x7531</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//---------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">// Function prototypes and external definitions:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">volatile</span> <span class="class"><span class="keyword">struct</span> <span class="title">EVA_REGS</span> <span class="title">EvaRegs</span>;</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">volatile</span> <span class="class"><span class="keyword">struct</span> <span class="title">EVB_REGS</span> <span class="title">EvbRegs</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __cplusplus</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">/* extern &quot;C&quot; */</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span>  <span class="comment">// end of DSP281x_EV.H definition</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//===========================================================================</span></span><br><span class="line"><span class="comment">// No more.</span></span><br><span class="line"><span class="comment">//===========================================================================</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>事件管理器相关函数的定义</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">init_eva</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// EVA Configure T1PWM, T2PWM, PWM1-PWM6 </span></span><br><span class="line"><span class="comment">// Initalize the timers</span></span><br><span class="line">   <span class="comment">// Initalize EVA Timer1 </span></span><br><span class="line">   EvaRegs.T1PR = <span class="number">0xFFFF</span>;       <span class="comment">// Timer1 period</span></span><br><span class="line">   EvaRegs.T1CMPR = <span class="number">0x0000</span>;     <span class="comment">// Timer1 compare</span></span><br><span class="line">   EvaRegs.T1CNT = <span class="number">0x0000</span>;      <span class="comment">// Timer1 counter</span></span><br><span class="line">   <span class="comment">// TMODE = continuous up/down</span></span><br><span class="line">   <span class="comment">// Timer enable</span></span><br><span class="line">   <span class="comment">// Timer compare enable</span></span><br><span class="line">   EvaRegs.T1CON.all = <span class="number">0x1042</span>;   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Initalize EVA Timer2 </span></span><br><span class="line">  EvaRegs.T2PR = <span class="number">0xFFFF</span>;       <span class="comment">// Timer2 period</span></span><br><span class="line">  EvaRegs.T2CMPR = <span class="number">0x0000</span>;     <span class="comment">// Timer2 compare</span></span><br><span class="line">  EvaRegs.T2CNT = <span class="number">0x0000</span>;      <span class="comment">// Timer2 counter</span></span><br><span class="line">  <span class="comment">// TMODE = continuous up/down</span></span><br><span class="line">  <span class="comment">// Timer enable</span></span><br><span class="line">  <span class="comment">// Timer compare enable</span></span><br><span class="line">  EvaRegs.T2CON.all = <span class="number">0x1042</span>;   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Setup T1PWM and T2PWM</span></span><br><span class="line">  <span class="comment">// Drive T1/T2 PWM by compare logic</span></span><br><span class="line">  EvaRegs.GPTCONA.bit.TCMPOE = <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// Polarity of GP Timer 1 Compare = Active low</span></span><br><span class="line">  EvaRegs.GPTCONA.bit.T1PIN = <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// Polarity of GP Timer 2 Compare = Active high</span></span><br><span class="line">  EvaRegs.GPTCONA.bit.T2PIN = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Enable compare for PWM1-PWM6</span></span><br><span class="line">  EvaRegs.CMPR1 = <span class="number">0x0000</span>;</span><br><span class="line">  EvaRegs.CMPR2 = <span class="number">0x0000</span>;</span><br><span class="line">  EvaRegs.CMPR3 = <span class="number">0x0000</span>;</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// Compare action control.  Action that takes place</span></span><br><span class="line">  <span class="comment">// on a cmpare event</span></span><br><span class="line">  <span class="comment">// output pin 1 CMPR1 - active high</span></span><br><span class="line">  <span class="comment">// output pin 2 CMPR1 - active low</span></span><br><span class="line">  <span class="comment">// output pin 3 CMPR2 - active high</span></span><br><span class="line">  <span class="comment">// output pin 4 CMPR2 - active low</span></span><br><span class="line">  <span class="comment">// output pin 5 CMPR3 - active high</span></span><br><span class="line">  <span class="comment">// output pin 6 CMPR3 - active low</span></span><br><span class="line">  EvaRegs.ACTRA.all = <span class="number">0x0666</span>;</span><br><span class="line">  EvaRegs.DBTCONA.all = <span class="number">0x0000</span>; <span class="comment">// Disable deadband</span></span><br><span class="line">  EvaRegs.COMCONA.all = <span class="number">0xA600</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">init_evb</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// EVB Configure T3PWM, T4PWM and PWM7-PWM12</span></span><br><span class="line"><span class="comment">// Step 1 - Initialize the Timers</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Initialize EVB Timer3 </span></span><br><span class="line">  <span class="comment">// Timer3 controls T3PWM and PWM7-12</span></span><br><span class="line">  EvbRegs.T3PR = <span class="number">0xFFFF</span>;       <span class="comment">// Timer3 period</span></span><br><span class="line">  EvbRegs.T3CMPR = <span class="number">0x0000</span>;     <span class="comment">// Timer3 compare</span></span><br><span class="line">  EvbRegs.T3CNT = <span class="number">0x0000</span>;      <span class="comment">// Timer3 counter</span></span><br><span class="line">  <span class="comment">// TMODE = continuous up/down</span></span><br><span class="line">  <span class="comment">// Timer enable</span></span><br><span class="line">  <span class="comment">// Timer compare enable</span></span><br><span class="line">  EvbRegs.T3CON.all = <span class="number">0x1042</span>;   </span><br><span class="line"></span><br><span class="line">  <span class="comment">// Initialize EVB Timer4 </span></span><br><span class="line">  <span class="comment">// Timer4 controls T4PWM</span></span><br><span class="line">  EvbRegs.T4PR = <span class="number">0xFFFF</span>;       <span class="comment">// Timer4 period</span></span><br><span class="line">  EvbRegs.T4CMPR = <span class="number">0x0000</span>;     <span class="comment">// Timer4 compare</span></span><br><span class="line">  EvbRegs.T4CNT = <span class="number">0x0000</span>;      <span class="comment">// Timer4 counter</span></span><br><span class="line">  <span class="comment">// TMODE = continuous up/down</span></span><br><span class="line">  <span class="comment">// Timer enable</span></span><br><span class="line">  <span class="comment">// Timer compare enable</span></span><br><span class="line">  EvbRegs.T4CON.all = <span class="number">0x1042</span>;   </span><br><span class="line"></span><br><span class="line">  <span class="comment">// Setup T3PWM and T4PWM</span></span><br><span class="line">  <span class="comment">// Drive T3/T4 PWM by compare logic</span></span><br><span class="line">  EvbRegs.GPTCONB.bit.TCMPOE = <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// Polarity of GP Timer 3 Compare = Active low</span></span><br><span class="line">  EvbRegs.GPTCONB.bit.T3PIN = <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// Polarity of GP Timer 4 Compare = Active high</span></span><br><span class="line">  EvbRegs.GPTCONB.bit.T4PIN = <span class="number">2</span>;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">// Enable compare for PWM7-PWM12</span></span><br><span class="line">  EvbRegs.CMPR4 = <span class="number">0x0000</span>;</span><br><span class="line">  EvbRegs.CMPR5 = <span class="number">0x0000</span>;</span><br><span class="line">  EvbRegs.CMPR6 = <span class="number">0x0000</span>;</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// Compare action control.  Action that takes place</span></span><br><span class="line">  <span class="comment">// on a cmpare event</span></span><br><span class="line">  <span class="comment">// output pin 1 CMPR4 - active high</span></span><br><span class="line">  <span class="comment">// output pin 2 CMPR4 - active low</span></span><br><span class="line">  <span class="comment">// output pin 3 CMPR5 - active high</span></span><br><span class="line">  <span class="comment">// output pin 4 CMPR5 - active low</span></span><br><span class="line">  <span class="comment">// output pin 5 CMPR6 - active high</span></span><br><span class="line">  <span class="comment">// output pin 6 CMPR6 - active low</span></span><br><span class="line">  EvbRegs.ACTRB.all = <span class="number">0x0666</span>;</span><br><span class="line">  EvbRegs.DBTCONB.all = <span class="number">0x0000</span>; <span class="comment">// Disable deadband</span></span><br><span class="line">  EvbRegs.COMCONB.all = <span class="number">0xA600</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="YILON">YILON</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2023/10/28/TI_DSP_TMS320F2812_%E4%BA%8B%E4%BB%B6%E7%AE%A1%E7%90%86%E5%99%A8%EF%BC%88%E4%B8%80%EF%BC%89__%E5%AE%9A%E6%97%B6%E5%99%A8GP%E4%B8%8E%E6%AF%94%E8%BE%83%E5%8D%95%E5%85%83/">http://example.com/2023/10/28/TI_DSP_TMS320F2812_%E4%BA%8B%E4%BB%B6%E7%AE%A1%E7%90%86%E5%99%A8%EF%BC%88%E4%B8%80%EF%BC%89__%E5%AE%9A%E6%97%B6%E5%99%A8GP%E4%B8%8E%E6%AF%94%E8%BE%83%E5%8D%95%E5%85%83/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://example.com" target="_blank">YILON</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/">嵌入式</a><a class="post-meta__tags" href="/tags/DSP/">DSP</a><a class="post-meta__tags" href="/tags/TI-DSP-TMS320F2812/">TI_DSP_TMS320F2812</a></div><div class="post-share"><div class="social-share" data-image="/private_img/cover.svg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2023/10/28/TI_DSP_TMS320F2812_%E5%AE%9A%E6%97%B6%E5%99%A8/" title="TI_DSP_TMS320F2812_定时器"><img class="cover" src="/private_img/cover.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">TI_DSP_TMS320F2812_定时器</div></div><div class="info-2"><div class="info-item-1">概述 F2810/F2812有3个32位CPU定时器(TIMER 0/1/2)  若系统时钟位150MHz， 则采用SYSCLKOUT为时钟的定时器频率也是150MHz。 注意定时器计数方式是递减计数。 定时器中断  如图，三个定时器中断对应的中断：  Timer 0中断：由PIE进行管理； Timer 1中断：与外部XNMI中断复用中断源INT13，不由PIE进行管理； Timer...</div></div></div></a><a class="pagination-related" href="/2023/10/28/TI_DSP_TMS320F2812_%E4%BA%8B%E4%BB%B6%E7%AE%A1%E7%90%86%E5%99%A8%EF%BC%88%E4%BA%8C%EF%BC%89__%E6%8D%95%E8%8E%B7%E5%8D%95%E5%85%83%E4%B8%8EQEP%E5%8D%95%E5%85%83/" title="TI_DSP_TMS320F2812_事件管理器（二）__捕获单元与QEP单元"><img class="cover" src="/private_img/cover.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">TI_DSP_TMS320F2812_事件管理器（二）__捕获单元与QEP单元</div></div><div class="info-2"><div class="info-item-1">...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2023/11/11/TI_DSP_TMS320F2812_CCS%E5%B7%A5%E4%BD%9C%E6%B5%81/" title="TI_DSP_TMS320F2812_CCS工作流"><img class="cover" src="/private_img/cover.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-11</div><div class="info-item-2">TI_DSP_TMS320F2812_CCS工作流</div></div><div class="info-2"><div class="info-item-1">非源工程下刷入固件 如果没有源工程而只有固件，通过配置.ccxml文件可以实现直接刷入。 打开CCS：  点击上方工具栏view-&gt;Target Cofigurations，会跳出对应窗口， 右键点击该窗口的User Defined文件夹，点击New Target Cofigurations, 弹出新建ccxml文件窗口。 命名完成后，弹出配置窗口：  当保存ccxml文件后， 当需要进行烧录时，先将设备通过烧录器连接到电脑上， 在User Defined文件夹找到对应的ccxml文件， 右键，点击&quot;Launch selected Cofiguration&quot;， 即跳出烧录界面：  点击Connect...</div></div></div></a><a class="pagination-related" href="/2023/11/04/TI_DSP_TMS320F2812_AD%E8%BD%AC%E6%8D%A2%E5%8D%95%E5%85%83/" title="TI_DSP_TMS320F2812_AD转换单元"><img class="cover" src="/private_img/cover.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-04</div><div class="info-item-2">TI_DSP_TMS320F2812_AD转换单元</div></div><div class="info-2"><div class="info-item-1">概述  ADC模块有以下特点：  12bit精度；(由于结果寄存器是16bit，因此需要将结果左移4位才能得到正确结果) 2个采样和保持器；（采样保持采集时间窗口有独立的预定标控制） 同时或顺序采样模式； 模拟输入电压范围0~3V； ADC时钟最高可配置为25MHz，即最高采样带宽为12.5MSPS； 16通道模拟输入； 自动排序功能支持16通道独立循环“自动转换”，每次转换的通道可以软件选择； 排序器可以工作在2个独立的8通道排序器模式，也可以工作在16通道级联模式； 排序器可工作在启动/停止模式，允许“多个排序触发”同步转换； F2810/F2811/F2812的B版本有增强的重叠排序器功能 AD转换公式为D=Vin−ADCLO3×(212−1)\rm{D = \frac{V_{in}-ADCLO}{3} \times (2^12 - 1)}D=3Vin​−ADCLO​×(212−1) 多个触发源：  S/W 软件立即启动 EVA、EVB...</div></div></div></a><a class="pagination-related" href="/2023/10/22/TI_DSP_TMS320F2812_GPIO/" title="TI_DSP_TMS320F2812_GPIO"><img class="cover" src="/private_img/cover.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-22</div><div class="info-item-2">TI_DSP_TMS320F2812_GPIO</div></div><div class="info-2"><div class="info-item-1">...</div></div></div></a><a class="pagination-related" href="/2023/11/04/TI_DSP_TMS320F2812_SPI%E6%8E%A5%E5%8F%A3/" title="TI_DSP_TMS320F2812_SPI接口"><img class="cover" src="/private_img/cover.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-04</div><div class="info-item-2">TI_DSP_TMS320F2812_SPI接口</div></div><div class="info-2"><div class="info-item-1">概述  SPI总线上只能有一个主机(Master)， 其它都是从机(Slave)。 一般地，可有几种工作情况：   Master发送数据，Slave发送伪数据； Master发送数据，其中一个Slave发送数据；（全双工） Master发送伪数据，其中一个Slave发送数据。   C28x的SPI模块概述 C28x有以下特点：   4个外部引脚  SPISOMI\rm{SPISOMI}SPISOMI：从输出/主输入引脚 SPISIMO\rm{SPISIMO}SPISIMO：从输入/主输出引脚 SPISTE‾\rm{\overline{SPISTE}}SPISTE：从发送使能引脚 SPICLK\rm{SPICLK}SPICLK：时钟引脚   波特率：125种可编程波特率 数据字长：可编程1~16个数据长度 4种时钟模式（这里说明SPI通讯方式中的另一种解释形式，和上面说的奇\偶数边沿采样本质一样）   无相位延时的下降沿；SPICLK 为高电平有效。在 SPICLK 信号的下降沿发 送数据，在 SPICLK 信号的上升沿接收数据。 有相位延时的下降沿：SPICLK...</div></div></div></a><a class="pagination-related" href="/2023/10/22/TI_DSP_TMS320F2812_%E4%B8%AD%E6%96%AD%E7%B3%BB%E7%BB%9F/" title="TI_DSP_TMS320F2812_中断系统"><img class="cover" src="/private_img/cover.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-22</div><div class="info-item-2">TI_DSP_TMS320F2812_中断系统</div></div><div class="info-2"><div class="info-item-1">概述 C28x DSP内核有16个中断源， 2个不可屏蔽中断：复位中断RS与不可屏蔽中断NMI 14个可屏蔽中断： INTx。  不可屏蔽中断NMI： 外部不可屏蔽中断请求经由专门的CPU针脚NMI，通知CPU发生了灾难性事件，如电源掉电、总线奇偶位出错等。 内部不可屏蔽中断请求由CPU内部自发产生的，如存储器读写出错、溢出中断、除法出错中断等。NMI线上中断请求是不可屏蔽的（即无法禁止的）、而且立即被CPU锁存。因此NMI是边沿触发，不需要电平触发。 NMI的优先级也比INTx高。  这些又可分为外部中断源与内部中断源：  如图：   内部中断源：三个定时器中断以及外设中断，其中Timer 1、 Timer...</div></div></div></a><a class="pagination-related" href="/2023/11/04/TI_DSP_TMS320F2812_SCI%E6%8E%A5%E5%8F%A3/" title="TI_DSP_TMS320F2812_SCI接口"><img class="cover" src="/private_img/cover.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-04</div><div class="info-item-2">TI_DSP_TMS320F2812_SCI接口</div></div><div class="info-2"><div class="info-item-1">概述 SCI即采用双线制通信的异步串行通信接口UART。  F2812处理器提供两个SCI接口（SCIA、SCIB）， 采用标准非归零(NRZ)数据格式， 使用发送与接收都有缓冲寄存器， 还支持支持16级接收/发送FIFO。 由于接受器和发送器有独立的中断和使能位， 因此可分别独立实现半双工通信， 或共同实现全双工通信。 为保证数据完整， SCI模块通过硬件实现对接收到的数据进行间断、极性、超限、帧错误的检测。 SCI接口的特点：  SCI数据帧格式 SCI以帧为单位传输数据：  其中， 奇偶校验位Parity可选， 停止位可选1或2位， 区分数据和地址的附加位ADD...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/private_img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">YILON</div><div class="author-info-description">YILON的技术小窝</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">93</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">92</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">24</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/YILON"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/YILON" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:yilongdyx@163.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">Welcome</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">事件管理器概述</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">通用定时器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E5%AE%9A%E6%97%B6%E5%99%A8%E8%AE%A1%E6%95%B0%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.1.</span> <span class="toc-text">通用定时器计数模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8%E7%9A%84%E6%AF%94%E8%BE%83%E5%8D%95%E5%85%83"><span class="toc-number">2.2.</span> <span class="toc-text">定时器的比较单元</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8PWM%E8%BE%93%E5%87%BA-TxPWM-%E9%80%BB%E8%BE%91%E6%8E%A7%E5%88%B6"><span class="toc-number">2.2.1.</span> <span class="toc-text">定时器PWM输出(TxPWM)逻辑控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#TxPWM%E7%9A%84%E5%8D%A0%E7%A9%BA%E6%AF%94%E8%AE%A1%E7%AE%97"><span class="toc-number">2.2.1.1.</span> <span class="toc-text">TxPWM的占空比计算</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">事件管理器的比较单元</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text">死区控制</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">5.</span> <span class="toc-text">通用定时器GP的相关寄存器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E5%AE%9A%E6%97%B6%E5%99%A8%E5%85%A8%E5%B1%80%E6%8E%A7%E5%88%B6%E5%AF%84%E5%AD%98%E5%99%A8GPTCONA"><span class="toc-number">5.1.</span> <span class="toc-text">通用定时器全局控制寄存器GPTCONA</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E5%AE%9A%E6%97%B6%E5%99%A8%E6%8E%A7%E5%88%B6%E5%AF%84%E5%AD%98%E5%99%A8TxCON"><span class="toc-number">5.2.</span> <span class="toc-text">通用定时器控制寄存器TxCON</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">6.</span> <span class="toc-text">比较单元相关寄存器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AF%94%E8%BE%83%E6%8E%A7%E5%88%B6%E5%AF%84%E5%AD%98%E5%99%A8"><span class="toc-number">6.1.</span> <span class="toc-text">比较控制寄存器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AF%94%E8%BE%83%E6%96%B9%E5%BC%8F%E6%8E%A7%E5%88%B6%E5%AF%84%E5%AD%98%E5%99%A8"><span class="toc-number">6.2.</span> <span class="toc-text">比较方式控制寄存器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%BB%E5%8C%BA%E8%AE%BE%E7%BD%AE%E5%AF%84%E5%AD%98%E5%99%A8"><span class="toc-number">6.3.</span> <span class="toc-text">死区设置寄存器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#EV%E6%89%A9%E5%B1%95%E6%8E%A7%E5%88%B6%E5%AF%84%E5%AD%98%E5%99%A8"><span class="toc-number">6.4.</span> <span class="toc-text">EV扩展控制寄存器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">7.</span> <span class="toc-text">事件管理器相关结构体的定义</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/12/26/FPGA_%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84/" title="FPGA_基本结构"><img src="/private_img/cover.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="FPGA_基本结构"/></a><div class="content"><a class="title" href="/2024/12/26/FPGA_%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84/" title="FPGA_基本结构">FPGA_基本结构</a><time datetime="2024-12-26T01:33:15.000Z" title="发表于 2024-12-26 09:33:15">2024-12-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/24/TI_DSP_C2000%E8%AE%A1%E7%AE%97%E5%8A%A0%E9%80%9F/" title="TI_DSP_C2000计算加速"><img src="/private_img/cover.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TI_DSP_C2000计算加速"/></a><div class="content"><a class="title" href="/2024/12/24/TI_DSP_C2000%E8%AE%A1%E7%AE%97%E5%8A%A0%E9%80%9F/" title="TI_DSP_C2000计算加速">TI_DSP_C2000计算加速</a><time datetime="2024-12-24T02:33:24.000Z" title="发表于 2024-12-24 10:33:24">2024-12-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/16/TI_DSP_TMS320F28377D_EMIF/" title="TI_DSP_TMS320F28377D_EMIF"><img src="/private_img/cover.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TI_DSP_TMS320F28377D_EMIF"/></a><div class="content"><a class="title" href="/2024/12/16/TI_DSP_TMS320F28377D_EMIF/" title="TI_DSP_TMS320F28377D_EMIF">TI_DSP_TMS320F28377D_EMIF</a><time datetime="2024-12-16T03:10:24.000Z" title="发表于 2024-12-16 11:10:24">2024-12-16</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/private_img/Top.svg);"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2024 By YILON</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(async () => {
  const showKatex = () => {
    document.querySelectorAll('#article-container .katex').forEach(el => el.classList.add('katex-show'))
  }

  if (!window.katex_js_css) {
    window.katex_js_css = true
    await btf.getCSS('https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css')
    if (true) {
      await btf.getScript('https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js')
    }
  }

  showKatex()
})()</script><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (false) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>